import{f as l,V as a,W as e,v as t,aR as o,aD as i,r as s,g as r,y as n,m as d,n as u,N as f,c as p,o as m,a as c,O as v,b as g,w as x,B as h,t as b,e as y,e3 as w,i as _,aT as k,aU as N,J as z,D as A,d as R,a1 as D,ab as P,a$ as S,a6 as j,A as U,_ as Y}from"./LNDzZpPm.js";import{E as $,a as M}from"./CyofXtRf.js";import{_ as T}from"./YO5qlHXs.js";import"./BcS6nOuf.js";import"./CqaOUC0Y.js";import{f as H}from"./-Rp-PRm7.js";import"./DuC4p7MX.js";const V={class:"w-full bg-[--main-bg]"},C={class:"py-19px px-16px flex-start gap-48px"},I={class:"text-14px"},B=["infinite-scroll-disabled"],E={key:0,class:"table-empty"},J={key:1},L={class:"flex-start"},O={class:"text-12px"},W={key:0,class:"color-[--up-color]"},q={key:1,class:"color-[--down-color]"},F={key:2,class:"color-[--third-text]"},G={class:"text-12px color-[--third-text]"},K={class:"text-12px color-[--third-text]"},Q={class:"mt-[2px] mb-[5px] py-[10px] text-[12px] text-center color-[--third-text]"},X={key:0},Z=Y(l({__name:"history",setup(l){const Y=a(),Z=e(),{t:ll}=t();o(),i();const al=s({finished:!1,error:!1,loading:!1,pageNo:0,pageSize:20,total:0,list:[]}),el=r((()=>al.value.loading)),tl=r((()=>n().tokenHistoryVisible?"calc(100vh - 182px)":"calc(100vh - 150px)")),ol=r((()=>(null==Y?void 0:Y.evmAddress)||(null==Z?void 0:Z.address)||""));function il(){sl()}function sl(){if(null==Y?void 0:Y.evmAddress){al.value.loading=!0;const l={pageSize:al.value.pageSize,pageNo:al.value.pageNo,evmAddress:null==Y?void 0:Y.evmAddress};H(l).then((l=>{0===al.value.pageNo&&(al.value.list=[]);const a=Array.isArray(l)?l:[];if((null==a?void 0:a.length)>0){const l=[...al.value.list],e=a.filter((a=>l.every((l=>!(l.id===a.id)))));al.value.list=[...l,...e]}al.value.finished=(null==a?void 0:a.length)<al.value.pageSize,al.value.finished||al.value.pageNo++})).catch((()=>{al.value.list=[],al.value.error=!0})).finally((()=>{al.value.loading=!1}))}else rl()}function rl(){al.value={finished:!1,error:!1,loading:!1,pageNo:0,pageSize:20,total:0,list:[]}}return d((()=>ol.value),(l=>{rl(),l&&sl()})),u((()=>{al.value.pageNo=0})),(l,a)=>{const e=h,t=y,o=S,i=k,s=N,r=$,n=T,d=M,u=f("copy"),Y=w;return m(),p("div",V,[c("div",C,[g(t,{to:"/copy-trade?tab=copyTrade",class:"flex-start no-underline items-center color-[--main-text]"},{default:x((()=>[g(e,{name:"majesticons:arrow-left-line",class:"mr-12px"}),c("span",I,b(l.$t("historyCopyTrade")),1)])),_:1})]),v((m(),p("div",{"infinite-scroll-delay":200,"infinite-scroll-disabled":_(al).loading||_(al).finished||_(al).error,"infinite-scroll-immediate":!0,class:"relative min-h-500px bg-[--secondary-bg]","infinite-scroll-distance":"300"},[g(d,{ref:"tableRef",data:_(al).list,"header-cell-style":{fontSize:"12px"},fit:"",style:j({height:`${_(tl)}`})},{empty:x((()=>{var l,a;return[_(el)||0!=(null==(a=null==(l=_(al))?void 0:l.list)?void 0:a.length)?(m(),p("span",J)):(m(),p("div",E,[g(o)]))]})),default:x((()=>[g(r,{label:"地址",align:"left",width:"225",fixed:"left",prop:"token_profit_rate","min-width":110},{default:x((({row:l})=>[c("div",L,[g(i,{class:"mr-10px",iconSize:"24px",iconChainSize:"14px",wallet_logo:{url:null==l?void 0:l.followAddress,logo:null==l?void 0:l.followIconUrl},address:l.followAddress},null,8,["wallet_logo","address"]),g(s,{addressClass:"token-symbol ellipsis color-[--main-text]",addressStyle:"max-width: 70px",showAddressTitle:"",address:l.followAddress,chain:l.chain,remark:l.remark||l.followName,wallet_logo:{url:null==l?void 0:l.followAddress,logo:null==l?void 0:l.followIconUrl},formatAddress:l=>"*"+(null==l?void 0:l.slice(-5)),onUpdateRemark:({remark:a})=>l.remark=a},null,8,["address","chain","remark","wallet_logo","formatAddress","onUpdateRemark"]),v(g(e,{name:"bxs:copy",class:"text-12px cursor-pointer color-[--third-text] ml-5px",onClick:a[0]||(a[0]=z((()=>{}),["stop","prevent"]))},null,512),[[u,l.followAddress]])])])),_:1}),g(r,{label:l.$t("totalPnL"),align:"right",prop:"token_profit_rate","min-width":110},{default:x((({row:a})=>[c("div",null,[c("div",{class:A((null==a?void 0:a.totalProfit)?"":"color-text-3")},[g(n,{value:null==a?void 0:a.totalProfit,signVisible:!0},{default:x((()=>[R(b(("formatNumber"in l?l.formatNumber:_(D))(Math.abs((null==a?void 0:a.totalProfit)??0),2)),1)])),_:2},1032,["value"])],2),c("div",O,[(null==a?void 0:a.totalProfitRatio)>0?(m(),p("span",W,b(("formatNumber"in l?l.formatNumber:_(D))((null==a?void 0:a.totalProfitRatio)||0,2))+"% ",1)):(null==a?void 0:a.totalProfitRatio)<0?(m(),p("span",q,b(("formatNumber"in l?l.formatNumber:_(D))((null==a?void 0:a.totalProfitRatio)||0,2))+"% ",1)):(m(),p("span",F,"0"))])])])),_:1},8,["label"]),g(r,{label:l.$t("unrealizedProfit"),align:"right",prop:"token_profit_rate","min-width":110},{default:x((({row:a})=>[c("div",null,[c("div",{class:A((null==a?void 0:a.profitUnrealized)?"":"color-text-3")},[g(n,{value:null==a?void 0:a.profitUnrealized,signVisible:!0},{default:x((()=>[R(b(("formatNumber"in l?l.formatNumber:_(D))(Math.abs((null==a?void 0:a.profitUnrealized)??0),2)),1)])),_:2},1032,["value"])],2)])])),_:1},8,["label"]),g(r,{label:l.$t("realizedProfit"),align:"right",prop:"token_profit_rate","min-width":110},{default:x((({row:a})=>[c("div",null,[c("div",{class:A((null==a?void 0:a.profitRealized)?"":"color-text-3")},[g(n,{value:null==a?void 0:a.profitRealized,signVisible:!0},{default:x((()=>[R(b(("formatNumber"in l?l.formatNumber:_(D))(Math.abs((null==a?void 0:a.profitRealized)??0),2)),1)])),_:2},1032,["value"])],2)])])),_:1},8,["label"]),g(r,{label:l.$t("time"),align:"right","min-width":110},{default:x((({row:e})=>[c("div",null,[c("span",G,b(("formatDate"in l?l.formatDate:_(P))(null==e?void 0:e.createTime,"YYYY-MM-DD HH:mm")),1),a[1]||(a[1]=R(" ~ ")),c("span",K,b(("formatDate"in l?l.formatDate:_(P))(null==e?void 0:e.finishTime,"YYYY-MM-DD HH:mm")),1)])])),_:1},8,["label"])])),_:1},8,["data","style"]),c("div",Q,[_(al).loading&&_(al).pageNo>1?(m(),p("span",X,b(l.$t("loading")),1)):U("",!0)])],8,B)),[[Y,il]])])}}}),[["__scopeId","data-v-c9ee9ffc"]]);export{Z as default};
