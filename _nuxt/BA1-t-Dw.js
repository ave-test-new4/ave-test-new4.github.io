import{f as t,R as e,V as l,M as n,c2 as i,bZ as a,b_ as s,W as o,y as u,I as r,r as p,g as c,c1 as d,N as x,c as v,o as m,O as g,A as h,b,K as f,B as y,t as k,P as w,c9 as S,i as $,s as B,w as V,a as _,F as T,C as q,J as A,D as F,ca as C,Q as j,cb as L,d as M,a2 as Q,cc as N,bY as P,a1 as D}from"./LNDzZpPm.js";import{S as G}from"./4BOpdlp6.js";const H={class:"items-center inline-flex"},I={key:0,class:"w-14px h-14px bg-[--secondary-text] rounded-full flex items-center justify-center mr-5px"},K={key:1,class:"w-14px h-14px bg-[--secondary-text] rounded-full flex items-center justify-center mr-5px"},O={key:2,class:"mr-5px color-[--secondary-text] text-12px"},R=["src"],U={key:3,class:"ml-20px flex justify-end items-center text-12px"},E={class:"color-[--secondary-text] mr-5px"},J={class:"flex items-center justify-between p-1px rounded-4px text-12px h-28px bg-[--main-input-button-bg] px-2px py-2px"},W=["id","onClick","onMouseenter"],Y={class:"text-14px mt-4px mb-4px flex-start"},Z={class:"mr-4px color-[--third-text] text-14px"},z={key:0},X={key:1},tt={key:0,class:"text-14px mt-4px mb-4px flex-start"},et={class:"mr-4px color-[--third-text] text-14px"},lt={key:1,class:"text-14px mt-4px mb-4px flex-start"},nt={class:"mr-4px color-[--third-text] text-14px whitespace-nowrap block"},it={class:"whitespace-nowrap"},at={class:"text-14px mt-4px mb-4px flex-start"},st={class:"mr-4px color-[--third-text] text-14px whitespace-nowrap"},ot={class:"text-14px mt-4px mb-4px flex-start"},ut={class:"mr-4px color-[--third-text] text-14px"},rt=t({__name:"quickSwapSet",props:{chain:{},quickBuyValue:{default:"0.01"},showQuickAmount:{type:Boolean},settingsButtonVisible:{type:Boolean,default:!0},quickTextVisible:{type:Boolean,default:!0}},emits:["update:quickBuyValue"],setup(t,{emit:rt}){e();const pt=l(),ct=n(),dt=i(),xt=a(),vt=s(),mt=o(),gt=rt,ht=t,bt=u(),ft=r(0),yt=p(!1),kt=p("s1"),wt=p({}),St=p(null),$t=c((()=>mt.provider&&mt.address&&!pt.evmAddress)),Bt=c((()=>ht.chain&&pt.isSupportChains.includes(ht.chain)&&!$t.value)),Vt=c((()=>ht.settingsButtonVisible&&!$t.value)),_t=c((()=>{var t,e,l;const n=ht.chain;if(!pt.isSupportChains.includes(n))return"";const i=null==(l=null==(e=null==(t=xt.botSettings)?void 0:t[n])?void 0:e.buy)?void 0:l[kt.value],a=null==i?void 0:i.mev,{gasTip1List:s,gasTip2List:o}=d(dt.gasTip,n),u=a?s:o,r=a?0:1,p=null==i?void 0:i.gas[r];return(null==p?void 0:p.customFee)||(null==u?void 0:u[null==p?void 0:p.level])})),Tt=c({get:()=>ht.quickBuyValue,set(t){gt("update:quickBuyValue",t)}});function qt(t){t&&(null==t?void 0:t.id)&&(wt.value[null==t?void 0:t.id]=t)}function At(t){kt.value=t,St.value=wt.value[t]||null,yt.value=!0,function(){var t;const e=ht.chain;if(!L(e))return;null==(t=N(e))||t.getFeeData().then((t=>{t&&(ft.value=new Q(t.gasPrice||0).toNumber())}))}()}function Ft(){var t,e,l,n,i,a,s,o,u;const r=ht.chain;if(L(r)&&(null==(t=null==pt?void 0:pt.isSupportChains)?void 0:t.includes(r))){const t=null==(n=null==(l=null==(e=xt.botSettings)?void 0:e[r])?void 0:l.buy)?void 0:n[kt.value],p=null==t?void 0:t.mev,c=(null==(a=null==(i=dt.mainTokensPrice)?void 0:i.find((t=>{var e;return t.chain===r&&t.token===(null==(e=P(r))?void 0:e.wmain_wrapper)})))?void 0:a.current_price_usd)||vt.swap.native.price||0,{gasTip1List:x,gasTip2List:v}=d(dt.gasTip,r),m=p?x:v,g=p?null==t?void 0:t.gas[0]:null==t?void 0:t.gas[1],h=(null==g?void 0:g.customFee)||(null==m?void 0:m[null==g?void 0:g.level])||"3",b=(null==(u=null==(o=null==(s=dt.gasTip)?void 0:s.find)?void 0:o.call(s,(t=>t.chain===r&&t.mev===!!p)))?void 0:u.gasLimit)||2e5;return D(new Q(ft.value).plus(new Q(h).times(String(10**9))).times(b).times(c).div(String(10**18)).toFixed(),2)}return 0}return(t,e)=>{var l;const n=y,i=w,a=j,s=x("tooltip");return m(),v("div",H,[t.quickTextVisible?(m(),v("span",I,[b(n,{class:"color-[--main-bg] text-10px",name:"mynaui:lightning-solid"})])):g((m(),v("span",K,[b(n,{class:"color-[--main-bg] text-10px",name:"mynaui:lightning-solid"})])),[[s,t.$t("quick")]]),t.quickTextVisible?(m(),v("span",O,k(t.$t("quick")),1)):h("",!0),b(i,{modelValue:$(Tt),"onUpdate:modelValue":e[0]||(e[0]=t=>B(Tt)?Tt.value=t:null),modelModifiers:{trim:!0},style:{"--el-input-text-color":"var(--main-text)","border-radius":"4px",width:"88px",height:"28px"},placeholder:"0",clearable:"",type:"text",onInput:e[1]||(e[1]=t=>{Tt.value=t.replace(/\-|[^\d.]/g,"")}),onBlur:e[2]||(e[2]=t=>function(t){var e,l,n;const i=t,a=(null==(n=null==(l=null==(e=new Q(i||0))?void 0:e.toFixed)?void 0:l.call(e).match(new RegExp("[0-9]*(\\.[0-9]{0,4})?")))?void 0:n[0])||"";String(i)!==String(a)&&(""===i?Tt.value="":0===Number(a)?Tt.value="0":Tt.value=a)}($(Tt))),onKeydown:e[3]||(e[3]=S((t=>{var e;return null==(e=null==t?void 0:t.target)?void 0:e.blur()}),["enter"]))},{prefix:V((()=>[t.chain?(m(),v("img",{key:0,class:"rounded-full w-14px h-14px mr-4px!",src:`${$(ct).token_logo_url}chain/${t.chain}.png`,alt:"",onerror:"this.src='/icon-default.png'",srcset:""},null,8,R)):h("",!0)])),_:1},8,["modelValue"]),$(Bt)&&$(Vt)?(m(),v("div",U,[_("span",E,k(t.$t("default")),1),_("div",J,[(m(!0),v(T,null,q("BotSettingsArr"in t?t.BotSettingsArr:$(C),(l=>{var n,i,a;return m(),v("button",{id:l.value,key:l.value,ref_for:!0,ref:qt,class:F(["cursor-pointer border-none font-400 rounded-4px min-w-36px py-5px px-10px text-center",""+(l.value===(null==(a=null==(i=null==(n=$(xt).botSettings)?void 0:n[t.chain])?void 0:i.buy)?void 0:a.selected)?"color-[--main-text] bg-[--tab-active-bg]":"color-[--secondary-text] bg-transparent")]),type:"button",onClick:A((e=>$(xt).botSettings[t.chain].buy.selected=l.value),["stop"]),onMouseenter:t=>At(l.value),onMouseleave:e[4]||(e[4]=t=>yt.value=!1)},k(l.label),43,W)})),128))])])):h("",!0),$(Bt)?(m(),f(G,{key:4,class:"ml-12px",chain:t.chain,setting:null==(l=$(xt))?void 0:l.botSettings[t.chain],showQuickAmount:t.showQuickAmount},null,8,["chain","setting","showQuickAmount"])):h("",!0),b(a,{visible:$(yt),"onUpdate:visible":e[5]||(e[5]=t=>B(yt)?yt.value=t:null),"popper-class":"new-popover","virtual-ref":$(St),"virtual-triggering":"",trigger:"contextmenu",placement:"bottom","popper-style":"min-width: auto; width: auto;"},{default:V((()=>{var e,l,i,a,o,u,r,p,c,d,x,f,y;return[_("ul",null,[_("li",Y,[g(b(n,{name:"custom:slippage",class:"text-14px color-[--third-text] ml-0 mr-6px cursor-pointer"},null,512),[[s,t.$t("slippage")]]),_("span",Z,k(t.$t("slippage")),1),"auto"!==(null==(a=null==(i=null==(l=null==(e=$(xt).botSettings)?void 0:e[t.chain])?void 0:l.buy)?void 0:i[$(kt)])?void 0:a.slippage)?(m(),v("span",z,k(null==(p=null==(r=null==(u=null==(o=$(xt).botSettings)?void 0:o[t.chain||""])?void 0:u.buy)?void 0:r[$(kt)])?void 0:p.slippage)+"%",1)):(m(),v("span",X,k(t.$t("auto")),1))]),$(L)(t.chain||"")?(m(),v("li",tt,[g(b(n,{name:"custom:gas",class:"text-14px color-[--third-text] ml-0 mr-6px cursor-pointer"},null,512),[[s,t.$t("estimatedGas")]]),_("span",et,k(t.$t("estimatedGas")),1),M(" $"+k(Ft()),1)])):h("",!0),"solana"===t.chain?(m(),v("li",lt,[g(b(n,{name:"custom:gas",class:"text-14px color-[--third-text] mr-6px cursor-pointer ml-0"},null,512),[[s,t.$t("priorityFee")]]),_("span",nt,k(t.$t("priorityFee")),1),_("span",it,k($(_t))+" SOL",1)])):h("",!0),_("li",at,[g(b(n,{name:`custom:half-${$(bt).mode}`,class:"text-18px color-[--third-text] ml-0 mr-6px cursor-pointer"},null,8,["name"]),[[s,t.$t("autoSellHalf")]]),_("span",st,k(t.$t("autoSellHalf")),1),M(" "+k((null==(c=$(xt).autoSellConfigs)?void 0:c.autoSell)?t.$t("on"):t.$t("off")),1)]),_("li",ot,[g(b(n,{name:"custom:mev",class:"text-16px color-[--third-text] ml-0 mr-6px cursor-pointer"},null,512),[[s,t.$t("mev")]]),_("span",ut,k(t.$t("mev")),1),M(" "+k((null==(y=null==(f=null==(x=null==(d=$(xt).botSettings)?void 0:d[t.chain])?void 0:x.buy)?void 0:f[$(kt)])?void 0:y.mev)?t.$t("on"):t.$t("off")),1)])])]})),_:1},8,["visible","virtual-ref"])])}}});export{rt as _};
