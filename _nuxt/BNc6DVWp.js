import{f as e,e_ as a,v as l,I as r,r as t,g as i,m as s,N as o,O as n,e3 as c,c as d,o as p,b as m,a as u,w as f,i as g,t as b,d as y,a1 as v,D as x,A as h,B as P,a5 as w,G as T,K as _,a$ as k,q1 as N,nT as I,a4 as D}from"./LNDzZpPm.js";import{E as L,a as S}from"./CyofXtRf.js";import"./BcS6nOuf.js";import"./CqaOUC0Y.js";import"./DuC4p7MX.js";const E=["infinite-scroll-disabled"],Y={class:"text-12px"},O={key:1},j={class:"text-14px"},R={key:0,class:"color-[--down-color]"},M={key:1,class:"color-[--up-color]"},z={key:0,class:"color-[--up-color]"},A={key:1},C={key:2,class:"color-[--down-color]"},H={key:3},U={class:"flex items-center justify-end gap-4px"},$={class:"mt-[2px] mb-[5px] py-[10px] text-[12px] text-center color-[--third-text]"},B={key:0},G=e({__name:"conditionOrder",props:{searchParams:{}},setup(e){const G=a(),{t:F}=l(),q=e,K=r(),Q=t({loading:!1,finished:!1,error:!1}),X=t(""),J={LAST_PRICE:F("latestPrice"),INDEX_PRICE:F("indexPrice")},V=i((()=>{var e,a,l;const r=(null==(l=null==(a=null==(e=G.metadata)?void 0:e.contractList)?void 0:a.reduce)?void 0:l.call(a,((e,a)=>(e[a.contractId]=a.contractName,e)),{}))||{};return r.ALL=F("all"),r})),W=async()=>{if(Q.value.loading||Q.value.finished)return;const e={filterStatusList:"UNTRIGGERED",...q.searchParams};X.value&&(e.offsetData=X.value);try{Q.value.loading=!0;const a=await N(e);let l=(e=>{var a;return(null==(a=null==e?void 0:e.map)?void 0:a.call(e,(e=>{const a="SELL"===e.side,l=e.type.includes("PROFIT");let r="";return r=a?l?"≥":"≤":l?"≤":"≥",{...e,triggerSign:r}})))||[]})(a.dataList);X.value&&(l=K.value.concat(l)),a.nextPageOffsetData||(Q.value.finished=!0),X.value=a.nextPageOffsetData,K.value=l}catch(a){Q.value.error=!0}finally{Q.value.loading=!1}};W();return s((()=>q.searchParams),(()=>{X.value="",K.value=[],Q.value.finished=!1,Q.value.error=!1,Q.value.loading=!1,W()})),(e,a)=>{const l=k,r=L,t=P,i=T,s=S,N=o("copy"),G=c;return n((p(),d("div",{class:"relative min-h-400px bg-[--secondary-bg]","infinite-scroll-delay":200,"infinite-scroll-disabled":g(Q).loading||g(Q).finished||g(Q).error,"infinite-scroll-immediate":!1,"infinite-scroll-distance":300},[m(s,{fit:"",data:g(K),"header-row-class-name":"text-12px sticky top-0 z-10 font-500","cell-class-name":"color-[--main-text] text-12px"},{empty:f((()=>{var a;return[g(Q).loading||0!==(null==(a=g(K))?void 0:a.length)?(p(),d("span",O)):(p(),_(l,{key:0,class:"pt-[40px]"},{default:f((()=>[u("span",Y,b(e.$t("emptyNoData")),1)])),_:1}))]})),default:f((()=>[m(r,{label:g(F)("markets1"),prop:"contractId"},{default:f((({row:e})=>[u("span",j,b(g(V)[e.contractId]),1)])),_:1},8,["label"]),m(r,{width:100,label:g(F)("Qty"),prop:"size"},{default:f((({row:a})=>[y(b(("formatNumber"in e?e.formatNumber:g(v))(a.size,10))+" "+b(g(V)[a.contractId].replace("USD","")),1)])),_:1},8,["label"]),m(r,{"min-width":100,align:"right",label:g(F)("price"),prop:"price"},{default:f((({row:a})=>[y(b(a.type.includes("LIMIT")?("formatNumber"in e?e.formatNumber:g(v))(a.price,{decimals:10,limit:20}):g(F)("market")),1)])),_:1},8,["label"]),m(r,{align:"right",label:g(F)("triggerPrice"),prop:"triggerPrice"},{default:f((({row:a})=>[y(b(a.triggerSign)+b(("formatNumber"in e?e.formatNumber:g(v))(a.triggerPrice,{limit:20,decimals:10}))+" "+b(J[a.triggerPriceType]),1)])),_:1},8,["label"]),m(r,{"min-width":100,align:"right",label:g(F)("tradeType"),prop:"tradeType"},{default:f((({row:e})=>[u("span",{class:x("BUY"===e.side?"color-[--up-color]":"color-[--down-color]")},b("BUY"===e.side?g(F)("buy"):g(F)("sell")),3)])),_:1},8,["label"]),m(r,{"min-width":100,align:"right",label:g(F)("orderType"),prop:"orderType"},{default:f((({row:a})=>[a.type.includes("STOP")?(p(),d("span",R,b(e.$t("stopLoss")),1)):a.type.includes("PROFIT")?(p(),d("span",M,b(e.$t("takeProfit")),1)):h("",!0)])),_:1},8,["label"]),m(r,{align:"right",label:g(F)("takeProfitStopLoss"),prop:"takeProfitStopLoss"},{default:f((({row:l})=>[l.openTp.triggerPrice?(p(),d("span",z,b(("formatNumber"in e?e.formatNumber:g(v))(l.openTp.triggerPrice,{limit:20,decimals:10})),1)):(p(),d("span",A,"--")),a[0]||(a[0]=u("span",{class:"color-[--icon-color] mx-4px"},"/",-1)),l.openSl.triggerPrice?(p(),d("span",C,b(("formatNumber"in e?e.formatNumber:g(v))(l.openSl.triggerPrice,{limit:20,decimals:10})),1)):(p(),d("span",H,"--"))])),_:1},8,["label"]),m(r,{align:"right",label:g(F)("orderId"),prop:"id"},{default:f((({row:e})=>[u("div",U,[y(b(e.id.slice(0,4))+"..."+b(e.id.slice(-4))+" ",1),n(m(t,{name:"bxs:copy",class:"color-[#5A5E64]"},null,512),[[N,e.id]])])])),_:1},8,["label"]),m(r,{align:"right",label:g(F)("orderTime"),prop:"createdTime"},{default:f((({row:e})=>[y(b(g(w)(Number(e.createdTime)).format("YYYY-MM-DD HH:mm:ss")),1)])),_:1},8,["label"]),m(r,{align:"right",label:g(F)("validityPeriod"),prop:"l2ExpireTime"},{default:f((({row:e})=>[y(b(g(w)(Number(e.l2ExpireTime)).format("YYYY-MM-DD HH:mm:ss")),1)])),_:1},8,["label"]),m(r,{"min-width":60,align:"right",label:g(F)("operation"),prop:"operate"},{default:f((({row:e})=>[m(i,{size:"small",style:{"--el-button-active-border-color":"transparent"},onClick:a=>(async e=>{await I([e]),W(),D.success(F("cancelledOrderSuccessfully"))})(e.id)},{default:f((()=>[y(b(g(F)("cancel")),1)])),_:2},1032,["onClick"])])),_:1},8,["label"])])),_:1},8,["data"]),u("div",$,[g(Q).loading&&g(X)?(p(),d("span",B,b(g(F)("loading")),1)):h("",!0)])],8,E)),[[G,W]])}}});export{G as default};
