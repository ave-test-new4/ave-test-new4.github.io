import{cd as t,cN as e,r as n,I as a,W as l,V as o,v as u,g as r,a2 as i,cU as s,cV as d,fb as c,bd as v,cn as _}from"./LNDzZpPm.js";function p(e,n){const{$api:a}=t();return a(`/v1api/v2/tokens/${e}/vote/support`,{method:"post",body:{user_address:n}})}function k(e,n){const{$api:a}=t();return a(`/v1api/v2/tokens/${e}/vote/against`,{method:"post",body:{user_address:n}})}function m(e,n){const{$api:a}=t();return a("/v1api/v2/tokens/contract/vote",{method:"get",query:{token_id:e,user_address:n}})}function h(e){const{$api:n}=t();return n("/v1api/v2/tokens/lp_holders",{method:"get",query:{token_id:e}})}const f=e("check",(()=>{const e=n(null),l=a(!1),o=a(0),u=a(!1),r=a(0),i=a(0),s=a(0);function d(t){return(null==t?void 0:t.lock)||/lock|null|(black hole)/gi.test((null==t?void 0:t.mark)||"")}return{hasLpLock:u,progress:o,showResult:l,checkResult:e,statistics_risk_store:r,statistics_warning_store:i,statistics_unknown_store:s,getContractCheckResult:function(n,a){(function(e,n){const{$api:a}=t();return a("/v1api/v2/tokens/contract",{method:"get",query:{token_id:e,type:"token",user_address:n}})})(n,a).then((t=>{var n,a,r,i,s,c,v,_,p,k;const m=t.token_contract,h=null==(n=null==m?void 0:m.contract_data)?void 0:n.audits_info;let f=null;h&&(f=JSON.parse(h));const g=(null==(r=null==(a=null==m?void 0:m.contract_data)?void 0:a.owner_txs)?void 0:r.filter((t=>{var e;return(null==t?void 0:t.params)&&(null==(e=null==t?void 0:t.params)?void 0:e.length)>0})))||[];null!==m.contract_data&&(l.value=!0);const y=((null==(i=m.contract_data)?void 0:i.pair_holders_rank)||[]).reduce(((t,e)=>{let n=0;return d(e)&&(n=Number(null==e?void 0:e.quantity)),t+n}),0)/Number(null==(s=null==m?void 0:m.contract_data)?void 0:s.pair_total);u.value=(null==(c=null==m?void 0:m.contract_data)?void 0:c.is_locked)||(((null==(p=null==(_=null==(v=null==m?void 0:m.contract_data)?void 0:v.pair_holders_rank)?void 0:_.some)?void 0:p.call(_,(t=>d(t))))&&y>.001)??!1),o.value=((null==(k=null==m?void 0:m.contract_data)?void 0:k.risk_score)??0)/100||0;const b={...null==m?void 0:m.contract_data,...m,audits_info:f,owner_txs:g};e.value=b}))}}})),g=e("rankKline",(()=>{const t=n({}),e=n(null),p=n(null),k=a([]),m=n(!1),h=n(""),g=n(""),y=n(0),b=n(0),w=n(0),$=n(!1),R=n(!1),x=l(),C=o(),{t:G}=u(),q=a(0),I=r((()=>{var t;return q.value||(null==(t=A.value)?void 0:t.current_price_usd)})),N=r((()=>C.evmAddress||x.address)),A=r((()=>{var t;return null==(t=e.value)?void 0:t.token})),F=r((()=>{var t,n;return null==(n=null==(t=e.value)?void 0:t.pairs)?void 0:n[0]})),L=n(!1),T=r((()=>{var t,e;return 0==y.value?G("defaultGroup"):null==(e=null==(t=k.value)?void 0:t.find((t=>t.group_id==y.value)))?void 0:e.name})),V=r((()=>{var t;return null==(t=F.value)?void 0:t.pair})),j=r((()=>{var t,e,n,a;const l=new i((null==(t=A.value)?void 0:t.total)||0).minus((null==(e=A.value)?void 0:e.lock_amount_dec)||0).minus((null==(n=A.value)?void 0:n.other_amount_dec)||0).minus((null==(a=A.value)?void 0:a.burn_amount_dec)||0);return l.lt(0)?new i(0):l})),D=r((()=>new i(I.value||0).times(j.value||0).toFixed()||"0"));return{klineRow:t,tokenInfo:e,tokenInfoExtra:p,userFavoriteGroups:k,collected:m,remark:h,remark2:g,groupId:y,selectedGroup:w,token:A,pair:F,selectedToken:L,twitterType:b,currentGroup:T,editableGroup:$,editableRemark:R,pairAddress:V,tokenPrice:q,price:I,circulation:j,marketCap:D,getData:function(t){const n=t.id;s(n).then((t=>{e.value=t})),d(n).then((t=>{p.value=t})),function(t){c(t).then((t=>{b.value=t.type||0})).catch((()=>{b.value=0}))}(n),N.value&&(function(t){_(t,N.value).then((t=>{m.value=!!(null==t?void 0:t.address),h.value=(null==t?void 0:t.remark)||"",g.value=(null==t?void 0:t.remark)||"",y.value=(null==t?void 0:t.group_id)||0,w.value=(null==t?void 0:t.group_id)||0})).catch((t=>{})).finally((()=>{}))}(n),async function(){try{const t=await v(N.value);k.value=(t||[]).filter((t=>!!t.name&&"token"===t.type))}catch(t){}}()),f().getContractCheckResult(n,N.value)}}}));export{m as _,f as a,p as b,k as c,h as g,g as u};
