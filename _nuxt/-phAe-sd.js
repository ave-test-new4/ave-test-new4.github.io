import{f as e,v as l,am as t,y as a,r,I as s,g as o,m as i,K as n,o as d,Q as u,w as c,b as m,bq as v,J as f,i as p,c as _,A as h,br as b,F as x,C as g,a as y,t as k,aL as w,a6 as $,G as A,d as N,pO as C,a4 as L,_ as D,b_ as T,h as F,bI as V,R as S,aE as U,U as B,ce as E,N as z,O,s as M,ar as I,B as R,D as P,aU as H,a1 as Y,P as j,a8 as q,bY as K,L as W,aM as Q,ab as G,a5 as J,aZ as Z,a_ as X,aQ as ee,el as le,V as te,W as ae,em as re,b6 as se,a2 as oe,aV as ie,aW as ne,pP as de,ed as ue,bv as ce,pQ as me,E as ve}from"./LNDzZpPm.js";import{_ as fe}from"./BPo-K5-z.js";import{a as pe,E as _e}from"./CyofXtRf.js";import"./BcS6nOuf.js";import{E as he}from"./CqaOUC0Y.js";import{a as be,E as xe}from"./DQUqQXp4.js";import{E as ge}from"./DsasURJA.js";import{E as ye}from"./B_bYtbjB.js";const ke={class:"el-form-item__error"},we={key:0,class:"font-normal text-sm leading-[16px] flex gap-8px flex-col p-14px bg-[--border] mb-8px"},$e={class:"text-[--third-text]"},Ae={key:0},Ne={key:0,class:"text-[--third-text] font-medium text-xs leading-[100%] mt-5px"},Ce={class:"flex-between w-100%"},Le=D(e({__name:"batchRemark",props:{width:{default:"320"},modelValue:{default:()=>({list:[],symbol:""})},buttonRef:{},title:{default:""}},emits:["update:visible","beforeEnter","onConfirm","onCancel"],setup(e,{expose:D,emit:T}){const{t:F}=l(),{lang:V}=t(a()),S=e,U=T,{isDark:B,batchRemarkFormData:E}=t(a()),z=r(),O=s([]),M={},I=r(),R=o((()=>V.value.indexOf("zh")>-1?[{value:1,label:"TOP"},{value:2,label:F("rank")},{value:3,label:F("profit5")}]:[{value:1,label:"TOP"},{value:3,label:F("profit5")}])),P=o((()=>{var e;return null==(e=R.value.find((e=>e.value==E.value.type)))?void 0:e.label}));function H(){var e,l,t,a;(null==(l=null==(e=S.modelValue)?void 0:e.list)?void 0:l.length)?O.value=null==(a=null==(t=S.modelValue)?void 0:t.list)?void 0:a.map(((e,l)=>`${S.modelValue.symbol}_${P.value}${l+1}${E.value.needAmount?"_"+e.total_profit:""}`)).slice(0,3):O.value=[]}i(E.value,(e=>{H()}));const Y=()=>{V.value.indexOf("zh")<=-1&&E.value.type<=2&&(E.value.type=1),U("beforeEnter"),H()},j=e=>{};function q(){var e;null==(e=I.value)||e.resetFields(),K()}function K(){var e,l;null==(l=null==(e=p(z))?void 0:e.hide)||l.call(e)}return D({close:K}),(e,l)=>{const t=xe,a=be,r=b,s=w,o=A,i=v,D=u;return d(),n(D,{ref_key:"popoverRef",ref:z,width:null==S?void 0:S.width,trigger:"click","virtual-ref":S.buttonRef,"virtual-triggering":"",title:null==S?void 0:S.title,persistent:!1,teleported:!1,"popper-class":"w-batchRemarkPop","popper-style":"--el-popover-title-font-size:14px;--el-popover-title-text-color:var(--main-text)",onBeforeEnter:Y},{default:c((()=>[m(i,{ref_key:"formRef",ref:I,model:p(E),rules:M,onSubmit:l[3]||(l[3]=f((e=>{var l;(l=p(I))&&l.validate(((e,l)=>{if(e){const e=S.modelValue.list.map(((e,l)=>({address:e.address,user_chain:e.user_chain,user_address:e.user_address,remark:`${S.modelValue.symbol}_${P.value}${l+1}${E.value.needAmount?"_"+e.total_profit:""}`})));C({update:!E.value.isUpdateExist,remarks:e}).then((e=>{U("onConfirm"),L({message:F("success"),type:"success"})})).catch((e=>{L.error(F("fail"))})),K()}}))}),["prevent","stop"]))},{default:c((()=>{var i,u;return[m(r,{prop:"type",required:!0,"label-position":"top",class:"mb-12px!",size:"large"},{error:c((()=>[y("div",ke,k(p(F)("cannotBeEmpty")),1)])),default:c((()=>[m(a,{"popper-class":"w-selectAutoSell",modelValue:p(E).type,"onUpdate:modelValue":l[0]||(l[0]=e=>p(E).type=e),placeholder:p(F)("pleaseSelect"),style:{},onChange:j,persistent:!0,teleported:!1,size:"large"},{default:c((()=>[(d(!0),_(x,null,g(p(R),(e=>(d(),n(t,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue","placeholder"])])),_:1}),p(O).length?(d(),_("div",we,[y("div",$e,k(p(F)("preview")),1),(d(!0),_(x,null,g(p(O),(e=>(d(),_("div",{class:"text-[--main-text]",key:e},k(e),1)))),128)),Array.isArray(null==(i=e.modelValue)?void 0:i.list)&&(null==(u=e.modelValue)?void 0:u.list.length)>3?(d(),_("div",Ae,"...")):h("",!0)])):h("",!0),m(r,{prop:"needAmount",class:"mb-12px!",size:"small"},{default:c((()=>[m(s,{modelValue:p(E).needAmount,"onUpdate:modelValue":l[1]||(l[1]=e=>p(E).needAmount=e),label:p(F)("profitAmount"),style:$(p(E).needAmount?"":"--el-checkbox-checked-text-color:var(--third-text)")},null,8,["modelValue","label","style"])])),_:1}),m(r,{prop:"isUpdateExist",class:"mb-12px!",size:"small"},{default:c((()=>[m(s,{modelValue:p(E).isUpdateExist,"onUpdate:modelValue":l[2]||(l[2]=e=>p(E).isUpdateExist=e),label:p(F)("notUpdateExistRemark"),style:$(p(E).isUpdateExist?"":"--el-checkbox-checked-text-color:var(--third-text)")},null,8,["modelValue","label","style"]),p(E).isUpdateExist?h("",!0):(d(),_("div",Ne,k(p(F)("notUpdateExistRemarkTip")),1))])),_:1}),m(r,{class:"mb-0px!"},{default:c((()=>[y("div",Ce,[m(o,{class:"flex-1",color:p(B)?"#1F242C":"#D9E8FF",onClick:f(q,["stop","prevent"])},{default:c((()=>[N(k(e.$t("cancel")),1)])),_:1},8,["color"]),m(o,{type:"primary",class:"flex-1","native-type":"submit",color:"#3F80F7"},{default:c((()=>[N(k(e.$t("confirm")),1)])),_:1})])])),_:1})]})),_:1},8,["model"])])),_:1},8,["width","virtual-ref","title"])}}}),[["__scopeId","data-v-5e0bfad3"]]),De={class:"holder-list"},Te={key:0,class:"flex flex-col items-center justify-center py-30px"},Fe={key:0,src:Z},Ve={key:1,src:X},Se={key:1},Ue={class:"flex items-center"},Be={class:"flex mt-10px"},Ee={class:"mt-20px"},ze={class:"flex items-baseline"},Oe={class:"flex-start"},Me={class:"color-[--third-text] mr-10px"},Ie={class:"relative"},Re={class:"flex-start"},Pe={style:{position:"relative",padding:"0 4px 0","line-height":"1"}},He={class:"text-[--third-text]"},Ye={class:"line-bar"},je={style:{display:"inline-flex","align-items":"center"}},qe={key:0,class:"text-12px",style:{color:"#f6465d"}},Ke={key:0,class:"text-12px color-[--third-text]",style:{"line-height":"1.3"}},We={key:1,class:"text-12px color-[--third-text]",style:{"line-height":"1.3"}},Qe={class:"text-12px",style:{"line-height":"1.3"}},Ge={class:"text-12px",style:{"line-height":"1.3"}},Je=["onClick"],Ze={key:1},Xe=["onClick"],el={key:1},ll={class:"text-[--third-text]"},tl=D(e({__name:"list",props:{modelValue:Boolean,tableList:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1},tabActive:{type:[String,Number],default:"all"},searchOriginKeyword:{type:String,default:""},searchOriginType:{type:String,default:""},isAttention:{type:Boolean,default:!1}},emits:["filterAddress","handleSortChange","filterOriginAddress","reLoad"],setup(e,{expose:i,emit:v}){var b;const g=T(),w=e,C=v;i({sort:function(e,l){var t;null==(t=null==ke?void 0:ke.value)||t.sort(e,l)},clearSort:function(){var e;null==(e=null==ke?void 0:ke.value)||e.clearSort()}});const{tableList:D,loading:Z}=F(w),{mode:X}=t(a()),{token:ie,price:ne,pair:de}=t(T()),ue=V(),ce=r({buttonRefs:{}}),{t:me}=l(),ve=a(),he=S(),be=U(),xe=s(!1),ge=s(""),ye=s(""),ke=B("holderListRef"),we=r(),$e=r(),Ae=r({list:[],symbol:null==(b=ie.value)?void 0:b.symbol}),Ne=()=>{var e;const l=[...D.value];Ae.value.symbol=(null==(e=ie.value)?void 0:e.symbol)||"",Ae.value.list=l.slice(0,20).map((e=>({total_profit:Math.trunc(null==e?void 0:e.total_profit)||0,user_address:null==e?void 0:e.holder,user_chain:null==e?void 0:e.chain,address:ee().currentAddress})))||[]},Ce=async()=>{var e,l;C("reLoad"),null==(l=null==(e=$e.value)?void 0:e.close)||l.call(e)},tl=o((()=>{var e,l;const t=be.params.id;return t?E(t):{address:(null==(e=ie.value)?void 0:e.token)||"",chain:(null==(l=ie.value)?void 0:l.chain)||""}})),al=o((()=>Math.max(g.commonHeight-265,450)));function rl(e){if(!ie.value)return;if(!le.includes(ie.value.chain))return;const{symbol:l,logo_url:t,chain:a,token:r}=ie.value,{target_token:s,token0_address:o,token0_symbol:i,token1_symbol:n,pair:d}=de.value;ue.$patch({drawerVisible:!0,tokenInfo:{id:be.params.id,symbol:l,logo_url:t,chain:a,address:r,remark:e.remark},pairInfo:{target_token:s,token0_address:o,token0_symbol:i,token1_symbol:n,pairAddress:d},user_address:e.holder})}function sl(e,l=0){const t=Math.max(((null==e?void 0:e.bought)||0)-((null==e?void 0:e.sold)||0),0);return new oe(l-((null==e?void 0:e.avg_purchase_price)||0)).times(t).toNumber()}function ol(e,l=0){return sl(e,l)+((null==e?void 0:e.realized_profit)||0)}function il(e){xe.value=!1,C("filterAddress",e),ye.value=e||"",ge.value=e||""}function nl(e){C("handleSortChange",e)}function dl(e,l){C("filterOriginAddress",{address:e,type:l})}return(l,t)=>{const a=R,r=j,s=A,o=u,i=q,v=H,b=fe,g=_e,C=pe,T=z("tooltip"),F=I;return d(),_("div",De,[m(Le,{ref_key:"proPopoverRef",ref:$e,modelValue:p(Ae),"onUpdate:modelValue":t[0]||(t[0]=e=>M(Ae)?Ae.value=e:null),"button-ref":p(we)||{},width:"248",title:l.$t("top20Remarked"),onOnConfirm:Ce,onBeforeEnter:Ne},null,8,["modelValue","button-ref","title"]),O((d(),n(C,{ref_key:"holderListRef",ref:ke,data:p(D),fit:"","scrollbar-always-on":"",height:p(al),style:{width:"100%"},onSortChange:nl,onRowClick:rl},{empty:c((()=>[p(Z)?(d(),_("span",Se)):(d(),_("div",Te,["light"===p(X)?(d(),_("img",Fe)):h("",!0),"dark"===p(X)?(d(),_("img",Ve)):h("",!0),y("span",null,k(p(me)("emptyNoData")),1)]))])),default:c((()=>{var u,A,C,F,V,S;return[m(g,{label:"#"+l.$t("holder"),align:"left","min-width":260,fixed:"left"},{header:c((()=>[y("div",Ue,[y("span",null,k(l.$t("wallet2")),1),p(ge)?(d(),n(a,{key:0,name:"custom:filter",class:"color-[--primary-color] cursor-pointer text-10px",onClick:t[1]||(t[1]=f((e=>il("")),["stop","prevent"]))})):(d(),n(o,{key:1,visible:p(xe),"onUpdate:visible":t[4]||(t[4]=e=>M(xe)?xe.value=e:null),placement:"bottom-start",title:"",width:350,trigger:"click"},{reference:c((()=>[y("div",null,[m(a,{name:"custom:filter",class:"color-[--d-666-l-999] cursor-pointer text-10px"})])])),default:c((()=>[y("div",null,[y("div",Be,[m(r,{modelValue:p(ye),"onUpdate:modelValue":t[2]||(t[2]=e=>M(ye)?ye.value=e:null),modelModifiers:{trim:!0},placeholder:l.$t("searchWallet"),clearable:""},null,8,["modelValue","placeholder"])]),y("div",Ee,[m(s,{class:"w-full",size:"default",color:p(he).isDark?"#f5f5f5":"#222222",style:{height:"30px","min-width":"70px","--el-button-font-weight":"400"},onClick:t[3]||(t[3]=f((e=>il(p(ye))),["stop"]))},{default:c((()=>[N(k(l.$t("confirm")),1)])),_:1},8,["color"])])])])),_:1},8,["visible"])),e.isAttention&&!p(D).length?(d(),n(i,{key:2,content:l.$t("noFollowedWalletPurchases"),effect:"light"},{default:c((()=>[m(a,{name:"mdi:information",class:"color-[--d-666-l-999] cursor-pointer text-14px ml-4px"})])),_:1},8,["content"])):h("",!0),["buy24h","all","30",30].indexOf(e.tabActive)>-1?(d(),n(a,{key:3,name:"fe:edit",class:"text-14px clickable",ref_key:"addButtonRef",ref:we},null,512)):h("",!0)])])),default:c((({row:e,$index:r})=>[y("div",ze,[y("div",Oe,[y("span",Me,k(r+1<10?"0":"")+k(r+1),1),m(a,{ref:e=>p(ce).buttonRefs[r]=e,name:"custom:attention",class:P([1===e.is_wallet_address_fav?"color-#F45469":"color-[--icon-color]","h-16px w-16px clickable shrink-0 mt-4px"]),onClick:f((l=>(async(e,l)=>{ee().currentAddress||te().changeConnectVisible(!0),ae().address&&!ae().walletSignature[ae().address]&&await ae().signMessageForFavorite(),1===e.is_wallet_address_fav||w.isAttention?se({address:ee().currentAddress,user_address:e.holder,user_chain:e.chain}).then((()=>{ve.getFollowsNum(),L.success(me("attention1Canceled")),D.value[l].is_wallet_address_fav=0})).catch((e=>{})).finally((()=>{})):ee().confirmAttention(ce.value.buttonRefs[l],e.chain,(t=>re({address:ee().currentAddress,user_address:e.holder,user_chain:e.chain,group:t.group,is_monitored:t.is_monitored}).then((e=>(ve.getFollowsNum(),D.value[l].is_wallet_address_fav=1,Promise.resolve(e)))).catch((e=>Promise.reject(e))).finally((()=>{}))))})(e,r)),["stop","prevent"])},null,8,["class","onClick"])]),y("div",Ie,[y("div",Re,[y("div",Pe,[(d(),n(v,{key:e.holder,addressClass:"token-symbol ellipsis",addressStyle:"max-width: 80px;display: inline-block",remark:e.remark,address:e.holder,chain:e.chain,iconEditColor:"var(--third-text)",iconEditSize:"12px",wallet_logo:e.wallet_logo,showAddressTitle:"",formatAddress:e=>(null==e?void 0:e.slice(0,4))+"..."+(null==e?void 0:e.slice(-4))},{default:c((()=>[y("div",He,[t[7]||(t[7]=N(" ( ")),y("span",{style:$({color:(null==e?void 0:e.total_bought)?"#12B886":"var(--third-text)"}),class:"text-[--third-text]"},k(("formatNumber"in l?l.formatNumber:p(Y))((null==e?void 0:e.total_bought)||0,2)),5),t[8]||(t[8]=N(" / ")),y("span",{style:$({color:(null==e?void 0:e.total_sold)?"#F6465D":"var(--third-text)"})},k(("formatNumber"in l?l.formatNumber:p(Y))((null==e?void 0:e.total_sold)||0,2)),5),t[9]||(t[9]=N(" ) "))])])),_:2},1032,["remark","address","chain","wallet_logo","formatAddress"]))]),m(b,{tags:e.new_tags,walletAddress:e.holder,chain:e.chain},null,8,["tags","walletAddress","chain"])]),y("div",Ye,[Number(null==e?void 0:e.max_balance)>0?(d(),_("span",{key:0,style:$({width:100*((null==e?void 0:e.balance)||0)/((null==e?void 0:e.max_balance)||0)+"%"})},null,4)):h("",!0)])])])])),_:1},8,["label"]),m(g,{label:`${null==(A=p(K)(null==(u=p(tl))?void 0:u.chain))?void 0:A.main_name} ${l.$t("bal")}`,align:"right","min-width":"90"},{default:c((({row:e})=>[y("span",{style:$({color:(null==e?void 0:e.main_coin_balance)?"":"var(--third-text)"})},k(("formatNumber"in l?l.formatNumber:p(Y))((null==e?void 0:e.main_coin_balance)||0,2)),5)])),_:1},8,["label"]),m(g,{label:l.$t("ratio")+p(ve).isUSDT?l.$t("bal"):l.$t("amount"),align:"right",width:p(W)((p(ve).isUSDT?l.$t("bal"):l.$t("amount"))+"/"+l.$t("ratio"))+100,sortable:"custom","sort-orders":["descending","ascending",null],prop:"balance"},{header:c((()=>[y("div",je,[y("span",null,k(l.$t("ratio"))+"/"+k(p(ve).isUSDT?l.$t("bal"):l.$t("amount")),1),O(m(a,{name:"custom:dollar",class:"color-[--third-text] clickable text-12px ml-3px",onClick:t[5]||(t[5]=f((e=>p(ve).isUSDT=!1),["stop"]))},null,512),[[Q,p(ve).isUSDT]]),O(m(a,{name:"custom:amount",class:"color-[--third-text] clickable text-12px ml-3px",onClick:t[6]||(t[6]=f((e=>p(ve).isUSDT=!0),["stop"]))},null,512),[[Q,!p(ve).isUSDT]])])])),default:c((({row:e})=>[-1===e.balance?(d(),_("span",qe,k(l.$t("soldAll")),1)):(d(),_(x,{key:1},[y("div",{style:$([{"line-height":"1.3"},{color:(null==e?void 0:e.balance_ratio)?"":"var(--third-text)"}])},k(("formatNumber"in l?l.formatNumber:p(Y))(100*((null==e?void 0:e.balance_ratio)||0),1))+"% ",5),p(ve).isUSDT?(d(),_("div",Ke,k("$"+("formatNumber"in l?l.formatNumber:p(Y))((null==e?void 0:e.balance_usd)||0,1)),1)):(d(),_("div",We,k(("formatNumber"in l?l.formatNumber:p(Y))((null==e?void 0:e.balance)||0,1)),1))],64))])),_:1},8,["label","width"]),m(g,{"class-name":"bg-12B8861A",label:l.$t("totalPnL"),align:"right",width:p(W)(l.$t("totalPnL"))+70,sortable:"custom","sort-orders":["descending","ascending",null],prop:"total_profit"},{default:c((({row:e})=>[y("div",{style:$([{color:ol(e,p(ne))?ol(e,p(ne))>0?"#12B886":"#F6465D":"var(--third-text)"},{"line-height":"1.3"}])},k(ol(e,p(ne))>0?"+":ol(e,p(ne))?"-":"")+"$"+k(("formatNumber"in l?l.formatNumber:p(Y))((ol(e,p(ne))||0)*(ol(e,p(ne))>0?1:-1),1)),5),y("div",{class:"text-12px",style:$([{color:(null==e?void 0:e.total_profit_ratio)?(null==e?void 0:e.total_profit_ratio)>0?"#12B886":"#F6465D":"var(--third-text)"},{"line-height":"1.3"}])},k((null==e?void 0:e.total_profit_ratio)>0?"+":"")+k(("formatNumber"in l?l.formatNumber:p(Y))(100*((null==e?void 0:e.total_profit_ratio)||0),1))+"% ",5)])),_:1},8,["label","width"]),m(g,{"class-name":"bg-12B8861A",label:l.$t("realized"),align:"right","min-width":"120",width:p(W)(l.$t("realized"))+70,sortable:"custom","sort-orders":["descending","ascending",null],prop:"realized_profit"},{default:c((({row:e})=>[y("span",{style:$({color:(null==e?void 0:e.realized_profit)?(null==e?void 0:e.realized_profit)>0?"#12B886":"#F6465D":"var(--third-text)"})},k((null==e?void 0:e.realized_profit)>0?"+":(null==e?void 0:e.realized_profit)?"-":"")+"$"+k(("formatNumber"in l?l.formatNumber:p(Y))(((null==e?void 0:e.realized_profit)||0)*((null==e?void 0:e.realized_profit)>0?1:-1),1)),5)])),_:1},8,["label","width"]),m(g,{"class-name":"bg-12B8861A",label:l.$t("unrealized"),align:"right",width:p(W)(l.$t("unrealized"))+70,sortable:"custom","sort-orders":["descending","ascending",null],prop:"unrealized_profit"},{default:c((({row:e})=>[y("span",{style:$({color:sl(e,p(ne))?sl(e,p(ne))>0?"#12B886":"#F6465D":"var(--third-text)"})},k(sl(e,p(ne))>0?"+":sl(e,p(ne))?"-":"")+"$"+k(("formatNumber"in l?l.formatNumber:p(Y))((sl(e,p(ne))||0)*(sl(e,p(ne))>0?1:-1),1)),5)])),_:1},8,["label","width"]),m(g,{"class-name":"bg-12B8861A",label:l.$t("bought1"),align:"right","min-width":"100",width:p(W)(l.$t("bought1"))+70,sortable:"custom","sort-orders":["descending","ascending",null],prop:"bought_usd"},{default:c((({row:e})=>[y("div",{style:$([{"line-height":"1.3"},{color:(null==e?void 0:e.bought_usd)?"#12B886":"var(--third-text)"}])}," $"+k(("formatNumber"in l?l.formatNumber:p(Y))((null==e?void 0:e.bought_usd)||0,1)),5),y("div",Qe,[y("span",{style:$({color:(null==e||e.bought,"var(--third-text)")})},k(("formatNumber"in l?l.formatNumber:p(Y))((null==e?void 0:e.bought)||0,1)),5)])])),_:1},8,["label","width"]),m(g,{"class-name":"bg-12B8861A",label:l.$t("sold1"),align:"right",width:p(W)(l.$t("sold1"))+70,sortable:"custom","sort-orders":["descending","ascending",null],prop:"sold_usd"},{default:c((({row:e})=>[y("div",{style:$([{"line-height":"1.3"},{color:(null==e?void 0:e.sold_usd)?"#F6465D":"var(--third-text)"}])}," $"+k(("formatNumber"in l?l.formatNumber:p(Y))((null==e?void 0:e.sold_usd)||0,2)),5),y("div",Ge,[y("span",{style:$({color:(null==e||e.sold,"var(--third-text)")})},k(("formatNumber"in l?l.formatNumber:p(Y))((null==e?void 0:e.sold)||0,1)),5)])])),_:1},8,["label","width"]),m(g,{"class-name":"bg-12B8861A",label:l.$t("avgBuySell"),width:p(W)(l.$t("avgBuySell"))+70,align:"right","min-width":"120"},{default:c((({row:e})=>[y("div",{style:$([{"line-height":"1.3"},{color:(null==e||e.avg_purchase_price,"var(--third-text)")}])}," $"+k(("formatNumber"in l?l.formatNumber:p(Y))((null==e?void 0:e.avg_purchase_price)||0,2)),5),y("div",{class:"text-12px",style:$([{"line-height":"1.3"},{color:(null==e||e.avg_sale_price,"var(--third-text)")}])}," $"+k(("formatNumber"in l?l.formatNumber:p(Y))((null==e?void 0:e.avg_sale_price)||0,2)),5)])),_:1},8,["label","width"]),m(g,{"class-name":"bg-286DFF1A",label:(null==(C=p(K)(p(tl).chain))?void 0:C.main_name)+l.$t("origin")+"/"+l.$t("time"),width:p(W)((null==(F=p(K)(p(tl).chain))?void 0:F.main_name)+l.$t("origin")+"/"+l.$t("time"))+70,align:"right","min-width":"150"},{default:c((({row:l})=>[y("div",{style:$([{"line-height":"1.3"},{color:(null==l?void 0:l.sol_first_transfer_in_from)?"":"var(--third-text)"}])},[(null==l?void 0:l.sol_first_transfer_in_from)?(d(),_("a",{key:0,class:"address",href:"",onClick:f((e=>rl({holder:l.sol_first_transfer_in_from,remark:null==l?void 0:l.sol_first_transfer_in_from_remark})),["stop","prevent"])},[(d(),n(v,{key:l.sol_first_transfer_in_from,addressClass:"token-symbol ellipsis",addressStyle:"max-width: 80px;display: inline-block;",remark:l.sol_first_transfer_in_from_remark,address:l.sol_first_transfer_in_from,chain:l.chain,iconEditColor:"var(--third-text)",iconEditSize:"12px",showAddressTitle:"",formatAddress:e=>(null==e?void 0:e.slice(0,4))+"..."+(null==e?void 0:e.slice(-4))},null,8,["remark","address","chain","formatAddress"]))],8,Je)):(d(),_("span",Ze,"-")),(null==l?void 0:l.sol_first_transfer_in_from)?(d(),n(a,{key:2,name:"custom:filter",class:"color-[--third-text] cursor-pointer text-10px ml-3px",style:$({color:e.searchOriginKeyword&&"sol"==e.searchOriginType?"var(--main-text)":""}),onClick:f((e=>dl(null==l?void 0:l.sol_first_transfer_in_from,"sol")),["stop","prevent"])},null,8,["style","onClick"])):h("",!0)],4),y("div",{class:"text-12px",style:$([{"line-height":"1.3"},{color:(null==l?void 0:l.sol_first_transfer_in_time)?"var(--third-text":"var(--third-text)"}])},k(l.sol_first_transfer_in_time?p(G)(l.sol_first_transfer_in_time,"YYYY-MM-DD HH:mm:ss"):"-"),5)])),_:1},8,["label","width"]),m(g,{"class-name":"bg-286DFF1A",label:(null==(V=p(ie))?void 0:V.symbol)+l.$t("origin")+"/"+l.$t("time"),align:"right","min-width":"150",width:p(W)((null==(S=p(ie))?void 0:S.symbol)+l.$t("origin")+"/"+l.$t("time"))+70},{default:c((({row:l})=>[y("div",{style:$([{"line-height":"1.3"},{color:(null==l?void 0:l.token_first_transfer_in_from)?"":"var(--third-text)"}])},[(null==l?void 0:l.token_first_transfer_in_from)?(d(),_("a",{key:0,class:"address",href:"",onClick:f((e=>rl({holder:l.token_first_transfer_in_from,remark:null==l?void 0:l.token_first_transfer_in_from_remark})),["stop","prevent"])},[(d(),n(v,{key:l.token_first_transfer_in_from,addressClass:"token-symbol ellipsis",addressStyle:"max-width: 80px;display: inline-block;",remark:l.token_first_transfer_in_from_remark,address:l.token_first_transfer_in_from,chain:l.chain,iconEditColor:"var(--third-text)",iconEditSize:"12px",showAddressTitle:"",formatAddress:e=>(null==e?void 0:e.slice(0,4))+"..."+(null==e?void 0:e.slice(-4))},null,8,["remark","address","chain","formatAddress"]))],8,Xe)):(d(),_("span",el,"-")),(null==l?void 0:l.token_first_transfer_in_from)?(d(),n(a,{key:2,name:"custom:filter",class:"color-[--third-text] cursor-pointer text-10px ml-3px",style:$({color:e.searchOriginKeyword&&"other"==e.searchOriginType?"var(--d-F5F5F5-l-222)":""}),onClick:f((e=>dl(null==l?void 0:l.token_first_transfer_in_from,"other")),["stop","prevent"])},null,8,["style","onClick"])):h("",!0)],4),y("div",{class:"text-12px",style:$([{"line-height":"1.3"},{color:(null==l||l.token_first_transfer_in_time,"var(--third-text)")}])},k(l.token_first_transfer_in_time?p(G)(l.token_first_transfer_in_time,"YYYY-MM-DD HH:mm:ss"):"-"),5)])),_:1},8,["label","width"]),m(g,{"class-name":"bg-286DFF1A",label:l.$t("TFInOut"),align:"right",width:p(W)(l.$t("TFInOut"))+70},{default:c((({row:e})=>[y("div",{style:$([{"line-height":"1.3"},{color:(null==e?void 0:e.transfer_in)?"#12B886":"var(--third-text)"}])}," +"+k(("formatNumber"in l?l.formatNumber:p(Y))((null==e?void 0:e.transfer_in)||0,1)),5),y("div",{class:"text-12px",style:$([{"line-height":"1.3"},{color:(null==e?void 0:e.transfer_out)?"#F6465D":"var(--third-text)"}])}," -"+k(("formatNumber"in l?l.formatNumber:p(Y))((null==e?void 0:e.transfer_out)||0,1)),5)])),_:1},8,["label","width"]),m(g,{"class-name":"bg-F6465D1A",label:l.$t("maxTx"),align:"right","min-width":"100",width:p(W)(l.$t("maxTx"))+70},{default:c((({row:e})=>[y("div",{style:$([{"line-height":"1.3"},{color:(null==e?void 0:e.max_single_purchase_usd)?"#12B886":"var(--third-text)"}])}," $"+k(("formatNumber"in l?l.formatNumber:p(Y))((null==e?void 0:e.max_single_purchase_usd)||0,1)),5),y("div",{class:"text-12px",style:$([{"line-height":"1.3"},{color:(null==e?void 0:e.max_single_sold_usd)?"#F6465D":"var(--third-text)"}])}," $"+k(("formatNumber"in l?l.formatNumber:p(Y))((null==e?void 0:e.max_single_sold_usd)||0,1)),5)])),_:1},8,["label","width"]),m(g,{"class-name":"bg-F6465D1A",label:l.$t("lastTx"),width:p(W)(l.$t("lastTx"))+70,align:"right"},{default:c((({row:e})=>[O((d(),_("span",ll,[N(k(e.last_txn_time?p(J)(new Date(e.last_txn_time).getTime()).fromNow():""),1)])),[[T,p(G)(e.last_txn_time,"YYYY-MM-DD HH:mm:ss")]])])),_:1},8,["label","width"])]})),_:1},8,["data","height"])),[[F,p(Z)&&!p(D).length]])])}}}),[["__scopeId","data-v-3f33a717"]]),al={class:"profit"},rl={class:"right"},sl=["innerHTML"],ol={key:2,class:"value"},il={class:"bottom"},nl={class:"item up"},dl={class:"label"},ul={class:"value"},cl={class:"label"},ml={class:"value"},vl={class:"item down"},fl={class:"label"},pl={class:"value"},_l={class:"label"},hl={class:"value"},bl=D(e({__name:"userTxsHead",props:{tableList:{},userAddress:{}},setup(e){const s=e,{t:u}=l(),c=te(),m=r(0),{mode:v}=t(a()),f=U(),{price:b,tokenInfoExtra:w}=t(T()),A=o((()=>f.params.id)),N=o((()=>{var e;return(null==(e=E(A.value))?void 0:e.address)||""})),C=o((()=>s.tableList.reduce(((e,l)=>I(l)?e+R(l):e),0))),L=o((()=>s.tableList.reduce(((e,l)=>I(l)?e+function(e){if(e.from_address===N.value)return e.from_amount;if(e.to_address===N.value)return e.to_amount;return e.amount0In>0?N.value===e.token0Address?e.amount0In:e.amount1Out:N.value===e.token1Address?e.amount1In:e.amount0Out}(l):e),0))),D=o((()=>s.tableList.reduce(((e,l)=>I(l)?e:e+R(l)),0))),F=o((()=>s.tableList.filter((e=>I(e))).length||0)),V=o((()=>s.tableList.filter((e=>!I(e))).length||0)),S=o((()=>L.value>0?C.value/L.value:0)),B=o((()=>{var e;let l=((null==(e=null==w?void 0:w.value)?void 0:e.sell_tax)||0)/100;return l=l>1?1:l,(b.value||0)*(m.value||0)*(1-l)})),z=o((()=>({value:D.value+B.value-C.value}))),O=o((()=>({value:C.value>0?z.value.value/C.value:0}))),M=o((()=>{var e,l;return[{label:u("currentPosition"),value:m.value,prefix:""},{label:`${u("tokenValue")}${(null==(e=null==w?void 0:w.value)?void 0:e.sell_tax)?` (-${u("sellTax1")} ${Y((null==(l=null==w?void 0:w.value)?void 0:l.sell_tax)||0,2)}%)`:""}`,value:B.value,prefix:"$"},{label:u("positionCostPrice"),value:S.value,prefix:"$"},{label:u("profit"),value:z.value.value,type:"profit"},{label:"",value:O.value.value,type:"profitChange"}]}));function I(e){if(e.from_address&&e.from_address===N.value)return!1;if(e.to_address&&e.to_address===N.value)return!0;return(e.amount0In>0?e.token0Address:e.token1Address)!==N.value}function R(e){return e.from_address===N.value?Number(e.from_amount)*Number(e.from_price_usd):e.to_address===N.value?Number(e.to_amount)*Number(e.to_price_usd):e.amountUSD}async function P(){try{const e=f.params.id;if(e){const{chain:l}=E(e),t=await ue(e,[s.userAddress+"-"+l]);if(t&&t[0]){const{value:e}=t[0];m.value=e}}}finally{}}return i((()=>s.tableList),(e=>{(null==e?void 0:e.length)>0&&(m.value=0,P())}),{deep:!0}),i((()=>s.userAddress),(e=>{e&&(m.value=0,P())}),{deep:!0}),(e,l)=>{var t;const a=ye;return d(),_(x,null,[e.userAddress===(null==(t=p(c))?void 0:t.evmAddress)?(d(),n(a,{key:0,class:"myTxs-notice",type:"warning",title:p(u)("myTxsNotice"),"show-icon":"",closable:"",style:$({backgroundColor:"light"===p(v)?"#ffa94d0d":"rgba(117, 65, 29, 0.23)",color:"#ED6A0C",border:"none"})},null,8,["title","style"])):h("",!0),y("div",al,[(d(!0),_(x,null,g(p(M),((l,t)=>(d(),_("div",{key:t,class:"profit-container"},[y("div",rl,[y("span",{class:"label",innerHTML:l.label},null,8,sl),"profit"===l.type?(d(),_("span",{key:0,class:"value",style:$({color:p(z).value>=0?p(ie)[0]:p(ne)[0]})},k(p(z).value>=0?"$"+p(Y)(p(z).value):"-$"+p(Y)(Math.abs(p(z).value))),5)):"profitChange"===l.type?(d(),_("span",{key:1,class:"value",style:$({color:p(z).value>=0?p(ie)[0]:p(ne)[0]})},k(("formatPercent"in e?e.formatPercent:p(de))(p(O).value)),5)):(d(),_("span",ol,k(l.prefix)+k(p(Y)(l.value)),1))])])))),128))]),y("div",{class:"holder-container",style:$({"--upColor":p(ie)[0],"--downColor":p(ne)[0],"--upBgColor":"#12B88633","--downBgColor":"#ff646d33"})},[y("div",il,[y("div",nl,[y("div",null,[y("span",dl,k(p(u)("buyFrequency")),1),y("span",ul,k(p(Y)(p(F))),1)]),y("div",null,[y("span",cl,k(p(u)("buyAmount"))+"($)",1),y("span",ml,k(p(Y)(p(C))),1)])]),y("div",vl,[y("div",null,[y("span",fl,k(p(u)("sellFrequency")),1),y("span",pl,k(p(Y)(p(V))),1)]),y("div",null,[y("span",_l,k(p(u)("sellAmount"))+"($)",1),y("span",hl,k(p(Y)(p(D))),1)])])])],4)],64)}}}),[["__scopeId","data-v-4243258c"]]),xl={class:"histrory"},gl={class:"top"},yl={key:0,class:"content"},kl=["onClick"],wl=["innerHTML"],$l=D(e({__name:"userTxsList",props:{tableList:{type:Array,default:()=>[]},userAddress:{type:String,default:""},scrollHeight:{type:String,default:"350px"},loadingMyTx:Boolean},setup(e){const l=e,{mode:s}=t(a()),i=U();r(""!==l.userAddress);const{token:u}=t(T()),v=o((()=>i.params.id)),b=o((()=>{var e;const l=v.value;return((null==(e=E(l))?void 0:e.address)||"").toLowerCase()}));function w(e){var l,t,a,r;if((null==(t=null==(l=e.from_address)?void 0:l.toLowerCase)?void 0:t.call(l))===b.value)return!1;if((null==(r=null==(a=e.to_address)?void 0:a.toLowerCase)?void 0:r.call(a))===b.value)return!0;return(e.amount0In>0?e.token0Address:e.token1Address)!==b.value}function $(e){var l,t,a,r;return(null==(t=null==(l=e.from_address)?void 0:l.toLowerCase)?void 0:t.call(l))===b.value?e.from_amount:(null==(r=null==(a=e.to_address)?void 0:a.toLowerCase)?void 0:r.call(a))===b.value?e.to_amount:e.amount0In>0?b.value===e.token0Address?e.amount0In:e.amount1Out:b.value===e.token1Address?e.amount1In:e.amount0Out}function A(e){var l,t,a,r;return(null==(t=null==(l=e.from_address)?void 0:l.toLowerCase)?void 0:t.call(l))===b.value?e.from_price_usd:(null==(r=null==(a=e.to_address)?void 0:a.toLowerCase)?void 0:r.call(a))===b.value?e.to_price_usd:b.value===e.token0Address?e.token0PriceUSD:e.token1PriceUSD}function N(e){var l,t,a,r;return(null==(t=null==(l=e.from_address)?void 0:l.toLowerCase)?void 0:t.call(l))===b.value?Number(e.from_amount)*Number(e.from_price_usd):(null==(r=null==(a=e.to_address)?void 0:a.toLowerCase)?void 0:r.call(a))===b.value?Number(e.to_amount)*Number(e.to_price_usd):e.amountUSD}return(e,t)=>{var a;const r=ge,o=he;return d(),_("div",xl,[m(bl,{tableList:l.tableList,userAddress:l.userAddress},null,8,["tableList","userAddress"]),y("div",gl,[y("span",null,k(e.$t("time")),1),y("span",null,k(e.$t("type")),1),y("span",null,k(e.$t("price"))+"($)",1),y("span",null,k(e.$t("amountB"))+"("+k(null==(a=p(u))?void 0:a.symbol)+")",1),y("span",null,k(e.$t("amountU"))+"($)",1),t[0]||(t[0]=y("span",null,"Tx",-1))]),m(o,{height:l.scrollHeight},{default:c((()=>[l.tableList.length>0?(d(),_("ul",yl,[(d(!0),_(x,null,g(l.tableList,((l,t)=>{var a,r;return d(),_("li",{key:t,class:"flex",onClick:f((e=>function(e){window.open(ce(e.network,e.transactionAddress,"tx"))}(l)),["stop"])},[y("span",null,k(p(G)(l.timestamp)),1),y("div",{class:P({green:w(l),red:!w(l)})},[y("span",null,k(w(l)?e.$t("buy"):e.$t("sell")),1)],2),y("div",{class:P({green:w(l),red:!w(l)})},[y("span",{innerHTML:p(Y)(A(l)||0)},null,8,wl)],2),y("div",{class:P({green:w(l),red:!w(l)})},k(p(Y)($(l))),3),y("span",null,k(p(Y)(N(l))),1),y("span",null,k(null==(a=l.transactionAddress)?void 0:a.slice(0,2))+"..."+k(null==(r=l.transactionAddress)?void 0:r.slice(-4)),1)],8,kl)})),128))])):h("",!0),l.tableList&&0!==l.tableList.length?h("",!0):(d(),n(r,{key:1,"image-size":100,image:"light"===p(s)?p(Z):p(X)},null,8,["image"]))])),_:1},8,["height"])])}}}),[["__scopeId","data-v-600613fb"]]),Al={key:0,class:"flex-start address mt-20px"},Nl=["href"],Cl=e({__name:"profitLoss",props:{modelValue:Boolean},emits:["update:modelValue"],setup(e,{expose:l,emit:t}){const a=e;l({getUserTxs:function(e){g.value=e,x.value=[],b.value=!0;const l={token_id:$.value,user_address:e};me(l).then((e=>{x.value=e.map((e=>({...e,timestamp:1e3*Number(e.time)||0,network:e.chain||"bsc",transactionAddress:e.transaction,walletAddress:e.wallet_address})))})).finally((()=>{b.value=!1}))}});const{modelValue:i}=F(a),u=U(),v=t,b=s(!1),x=r([]),g=s(""),w=o({get:()=>i.value,set(e){v("update:modelValue",e)}}),$=o((()=>u.params.id)),A=o((()=>{var e;return null==(e=E(u.params.id))?void 0:e.chain}));return(e,l)=>{const t=R,a=ve,r=z("copy");return d(),n(a,{modelValue:p(w),"onUpdate:modelValue":l[1]||(l[1]=e=>M(w)?w.value=e:null),width:"860",height:"600","header-class":"p-0!",title:e.$t("transactionsDetails")},{default:c((()=>{var e,a;return[p(g)?(d(),_("div",Al,[y("span",null,[y("a",{href:p(ce)(p(A),p(g),"address"),target:"_blank"},k((null==(e=p(g))?void 0:e.slice(0,6))+"..."+(null==(a=p(g))?void 0:a.slice(-6))),9,Nl),O(m(t,{name:"bxs:copy",class:"text-12px ml-2px cursor-pointer ml-10px",onClick:l[0]||(l[0]=f((()=>{}),["stop","prevent"]))},null,512),[[r,p(g)]])])])):h("",!0),m($l,{tableList:p(x),userAddress:p(g),loadingMyTx:p(b)},null,8,["tableList","userAddress","loadingMyTx"])]})),_:1},8,["modelValue","title"])}}});export{tl as L,Cl as _};
