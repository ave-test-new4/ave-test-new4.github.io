import{fn as e,fs as a,f_ as t,fS as l,I as o,g as r,fy as n,r as s,n as i,m as u,fB as c,g3 as d,l as h,gK as v,fv as f,f as p,c as b,o as m,a as g,i as _,a6 as y,D as k,fl as C,gL as w,fq as M,gM as S,gu as x,F as L,C as V,cm as A,f$ as E,j as H,fA as K,p as B,ew as W,K as $,A as D,b as O,b$ as P,P as R,fG as q}from"./LNDzZpPm.js";const j=e({color:{type:a(Object),required:!0},vertical:Boolean,disabled:Boolean});let F=!1;function T(e,a){if(!t)return;const l=function(e){var t;null==(t=a.drag)||t.call(a,e)},o=function(e){var t;document.removeEventListener("mousemove",l),document.removeEventListener("mouseup",o),document.removeEventListener("touchmove",l),document.removeEventListener("touchend",o),document.onselectstart=null,document.ondragstart=null,F=!1,null==(t=a.end)||t.call(a,e)},r=function(e){var t;F||(e.preventDefault(),document.onselectstart=()=>!1,document.ondragstart=()=>!1,document.addEventListener("mousemove",l),document.addEventListener("mouseup",o),document.addEventListener("touchmove",l),document.addEventListener("touchend",o),F=!0,null==(t=a.start)||t.call(a,e))};e.addEventListener("mousedown",r),e.addEventListener("touchstart",r,{passive:!1})}const X=(e,{bar:a,thumb:t,handleDrag:l})=>{const o=h(),d=n("color-alpha-slider"),v=s(0),f=s(0),p=s();function b(){v.value=function(){if(!t.value)return 0;if(e.vertical)return 0;const a=o.vnode.el,l=e.color.get("alpha");return a?Math.round(l*(a.offsetWidth-t.value.offsetWidth/2)/100):0}(),f.value=function(){if(!t.value)return 0;const a=o.vnode.el;if(!e.vertical)return 0;const l=e.color.get("alpha");return a?Math.round(l*(a.offsetHeight-t.value.offsetHeight/2)/100):0}(),p.value=function(){if(e.color&&e.color.value){const{r:a,g:t,b:l}=e.color.toRgb();return`linear-gradient(to right, rgba(${a}, ${t}, ${l}, 0) 0%, rgba(${a}, ${t}, ${l}, 1) 100%)`}return""}()}i((()=>{if(!a.value||!t.value)return;const e={drag:e=>{l(e)},end:e=>{l(e)}};T(a.value,e),T(t.value,e),b()})),u((()=>e.color.get("alpha")),(()=>b())),u((()=>e.color.value),(()=>b()));const m=r((()=>[d.b(),d.is("vertical",e.vertical),d.is("disabled",e.disabled)])),g=r((()=>d.e("bar"))),_=r((()=>d.e("thumb")));return{rootKls:m,barKls:g,barStyle:r((()=>({background:p.value}))),thumbKls:_,thumbStyle:r((()=>({left:c(v.value),top:c(f.value)}))),update:b}},Y=p({name:"ElColorAlphaSlider"});var z=f(p({...Y,props:j,setup(e,{expose:a}){const t=e,{alpha:n,alphaLabel:s,bar:i,thumb:u,handleDrag:c,handleClick:f,handleKeydown:p}=(e=>{const a=h(),{t:t}=l(),n=o(),s=o(),i=r((()=>e.color.get("alpha"))),u=r((()=>t("el.colorpicker.alphaLabel")));function c(t){if(!s.value||!n.value||e.disabled)return;const l=a.vnode.el.getBoundingClientRect(),{clientX:o,clientY:r}=v(t);if(e.vertical){let a=r-l.top;a=Math.max(n.value.offsetHeight/2,a),a=Math.min(a,l.height-n.value.offsetHeight/2),e.color.set("alpha",Math.round((a-n.value.offsetHeight/2)/(l.height-n.value.offsetHeight)*100))}else{let a=o-l.left;a=Math.max(n.value.offsetWidth/2,a),a=Math.min(a,l.width-n.value.offsetWidth/2),e.color.set("alpha",Math.round((a-n.value.offsetWidth/2)/(l.width-n.value.offsetWidth)*100))}}function f(a){let t=i.value+a;t=t<0?0:t>100?100:t,e.color.set("alpha",t)}return{thumb:n,bar:s,alpha:i,alphaLabel:u,handleDrag:c,handleClick:function(a){var t;e.disabled||(a.target!==n.value&&c(a),null==(t=n.value)||t.focus())},handleKeydown:function(a){if(e.disabled)return;const{code:t,shiftKey:l}=a,o=l?10:1;switch(t){case d.left:case d.down:a.preventDefault(),a.stopPropagation(),f(-o);break;case d.right:case d.up:a.preventDefault(),a.stopPropagation(),f(o)}}}})(t),{rootKls:C,barKls:w,barStyle:M,thumbKls:S,thumbStyle:x,update:L}=X(t,{bar:i,thumb:u,handleDrag:c});return a({update:L,bar:i,thumb:u}),(e,a)=>(m(),b("div",{class:k(_(C))},[g("div",{ref_key:"bar",ref:i,class:k(_(w)),style:y(_(M)),onClick:_(f)},null,14,["onClick"]),g("div",{ref_key:"thumb",ref:u,class:k(_(S)),style:y(_(x)),"aria-label":_(s),"aria-valuenow":_(n),"aria-orientation":e.vertical?"vertical":"horizontal","aria-valuemin":"0","aria-valuemax":"100",role:"slider",tabindex:"0",onKeydown:_(p)},null,46,["aria-label","aria-valuenow","aria-orientation","onKeydown"])],2))}}),[["__file","alpha-slider.vue"]]);var U=f(p({name:"ElColorHueSlider",props:{color:{type:Object,required:!0},vertical:Boolean,disabled:Boolean},setup(e){const a=n("color-hue-slider"),t=h(),l=s(),o=s(),c=s(0),d=s(0),f=r((()=>e.color.get("hue")));function p(a){if(!o.value||!l.value||e.disabled)return;const r=t.vnode.el.getBoundingClientRect(),{clientX:n,clientY:s}=v(a);let i;if(e.vertical){let e=s-r.top;e=Math.min(e,r.height-l.value.offsetHeight/2),e=Math.max(l.value.offsetHeight/2,e),i=Math.round((e-l.value.offsetHeight/2)/(r.height-l.value.offsetHeight)*360)}else{let e=n-r.left;e=Math.min(e,r.width-l.value.offsetWidth/2),e=Math.max(l.value.offsetWidth/2,e),i=Math.round((e-l.value.offsetWidth/2)/(r.width-l.value.offsetWidth)*360)}e.color.set("hue",i)}function b(){c.value=function(){if(!l.value)return 0;const a=t.vnode.el;if(e.vertical)return 0;const o=e.color.get("hue");return a?Math.round(o*(a.offsetWidth-l.value.offsetWidth/2)/360):0}(),d.value=function(){if(!l.value)return 0;const a=t.vnode.el;if(!e.vertical)return 0;const o=e.color.get("hue");return a?Math.round(o*(a.offsetHeight-l.value.offsetHeight/2)/360):0}()}return u((()=>f.value),(()=>{b()})),i((()=>{if(!o.value||!l.value||e.disabled)return;const a={drag:e=>{p(e)},end:e=>{p(e)}};T(o.value,a),T(l.value,a),b()})),{bar:o,thumb:l,thumbLeft:c,thumbTop:d,hueValue:f,handleClick:function(a){if(e.disabled)return;a.target!==l.value&&p(a)},update:b,ns:a}}}),[["render",function(e,a,t,l,o,r){return m(),b("div",{class:k([e.ns.b(),e.ns.is("vertical",e.vertical)])},[g("div",{ref:"bar",class:k(e.ns.e("bar")),onClick:e.handleClick},null,10,["onClick"]),g("div",{ref:"thumb",class:k(e.ns.e("thumb")),style:y({left:e.thumbLeft+"px",top:e.thumbTop+"px"})},null,6)],2)}],["__file","hue-slider.vue"]]);const G=e({modelValue:{type:a(String),default:void 0},border:{type:Boolean,default:!0},showAlpha:Boolean,colorFormat:String,disabled:Boolean,predefine:{type:a(Array)}}),I={[M]:e=>C(e)||w(e)},J=Symbol("colorCommonPickerKey"),N=Symbol("colorPickerPanelContextKey");class Q{constructor(e={}){this._hue=0,this._saturation=100,this._value=100,this._alpha=100,this._tiny=new S,this._isValid=!1,this.enableAlpha=!1,this.format="",this.value="";for(const a in e)x(e,a)&&(this[a]=e[a]);e.value?this.fromString(e.value):this.doOnChange()}set(e,a){if(1!==arguments.length||"object"!=typeof e)this[`_${e}`]=a,this._isValid=!0,this.doOnChange();else for(const t in e)x(e,t)&&this.set(t,e[t])}get(e){return["hue","saturation","value","alpha"].includes(e)?Math.round(this[`_${e}`]):this[`_${e}`]}toRgb(){return this._isValid?this._tiny.toRgb():{r:255,g:255,b:255,a:0}}fromString(e){const a=new S(e);if(this._isValid=a.isValid,a.isValid){const{h:e,s:t,v:l,a:o}=a.toHsv();this._hue=e,this._saturation=100*t,this._value=100*l,this._alpha=100*o}else this._hue=0,this._saturation=100,this._value=100,this._alpha=100;this.doOnChange()}compare(e){const a=new S({h:e._hue,s:e._saturation/100,v:e._value/100,a:e._alpha/100});return this._tiny.equals(a)}doOnChange(){const{_hue:e,_saturation:a,_value:t,_alpha:l,format:o,enableAlpha:r}=this;let n=o||(r?"rgb":"hex");"hex"===o&&r&&(n="hex8"),this._tiny=new S({h:e,s:a/100,v:t/100,a:l/100}),this.value=this._isValid?this._tiny.toString(n):""}}var Z=f(p({props:{colors:{type:Array,required:!0},color:{type:Object,required:!0},enableAlpha:{type:Boolean,required:!0},disabled:Boolean},setup(e){const a=n("color-predefine"),{currentColor:t}=A(N),l=s(o(e.colors,e.color));function o(e,a){return e.map((e=>{const t=new Q({value:e});return t.selected=t.compare(a),t}))}return u((()=>t.value),(e=>{const a=new Q({value:e});l.value.forEach((e=>{e.selected=a.compare(e)}))})),E((()=>{l.value=o(e.colors,e.color)})),{rgbaColors:l,handleSelect:function(a){e.disabled||e.color.fromString(e.colors[a])},ns:a}}}),[["render",function(e,a,t,l,o,r){return m(),b("div",{class:k(e.ns.b())},[g("div",{class:k(e.ns.e("colors"))},[(m(!0),b(L,null,V(e.rgbaColors,((a,t)=>(m(),b("div",{key:e.colors[t],class:k([e.ns.e("color-selector"),e.ns.is("alpha",a.get("alpha")<100),{selected:a.selected}]),onClick:a=>e.handleSelect(t)},[g("div",{style:y({backgroundColor:a.value})},null,4)],10,["onClick"])))),128))],2)],2)}],["__file","predefine.vue"]]);var ee=f(p({name:"ElSlPanel",props:{color:{type:Object,required:!0},disabled:Boolean},setup(e){const a=n("color-svpanel"),t=h(),l=s(0),o=s(0),c=s("hsl(0, 100%, 50%)"),d=r((()=>({hue:e.color.get("hue"),value:e.color.get("value")})));function f(){const a=e.color.get("saturation"),r=e.color.get("value"),n=t.vnode.el,{clientWidth:s,clientHeight:i}=n;o.value=a*s/100,l.value=(100-r)*i/100,c.value=`hsl(${e.color.get("hue")}, 100%, 50%)`}function p(a){if(e.disabled)return;const r=t.vnode.el.getBoundingClientRect(),{clientX:n,clientY:s}=v(a);let i=n-r.left,u=s-r.top;i=Math.max(0,i),i=Math.min(i,r.width),u=Math.max(0,u),u=Math.min(u,r.height),o.value=i,l.value=u,e.color.set({saturation:i/r.width*100,value:100-u/r.height*100})}return u((()=>d.value),(()=>{f()})),i((()=>{T(t.vnode.el,{drag:e=>{p(e)},end:e=>{p(e)}}),f()})),{cursorTop:l,cursorLeft:o,background:c,colorValue:d,handleDrag:p,update:f,ns:a}}}),[["render",function(e,a,t,l,o,r){return m(),b("div",{class:k(e.ns.b()),style:y({backgroundColor:e.background})},[g("div",{class:k(e.ns.e("white"))},null,2),g("div",{class:k(e.ns.e("black"))},null,2),g("div",{class:k(e.ns.e("cursor")),style:y({top:e.cursorTop+"px",left:e.cursorLeft+"px"})},[g("div")],6)],6)}],["__file","sv-panel.vue"]]);const ae=(e,a)=>{const t=H(new Q({enableAlpha:e.showAlpha,format:e.colorFormat||"",value:e.modelValue}));return u((()=>[e.colorFormat,e.showAlpha]),(()=>{t.enableAlpha=e.showAlpha,t.format=e.colorFormat||t.format,t.doOnChange(),a(M,t.value)})),{color:t}},te=p({name:"ElColorPickerPanel"});const le=q(f(p({...te,props:G,emits:I,setup(e,{expose:a,emit:t}){const l=e,o=n("color-picker-panel"),c=K(),d=s(),h=s(),v=s(),f=s(),p=s(""),{color:y}=A(J,(()=>ae(l,t)),!0);function C(){y.fromString(p.value),y.value!==p.value&&(p.value=y.value)}return i((()=>{l.modelValue&&(p.value=y.value),B((()=>{var e,a,t;null==(e=d.value)||e.update(),null==(a=h.value)||a.update(),null==(t=v.value)||t.update()}))})),u((()=>l.modelValue),(e=>{e&&e!==y.value&&y.fromString(e)})),u((()=>y.value),(e=>{t(M,e),p.value=e})),W(N,{currentColor:r((()=>y.value))}),a({color:y,inputRef:f}),(e,a)=>(m(),b("div",{class:k([_(o).b(),_(o).is("disabled",_(c)),_(o).is("border",e.border)])},[g("div",{class:k(_(o).e("wrapper"))},[O(U,{ref_key:"hue",ref:d,class:"hue-slider",color:_(y),vertical:"",disabled:_(c)},null,8,["color","disabled"]),O(ee,{ref_key:"sv",ref:h,color:_(y),disabled:_(c)},null,8,["color","disabled"])],2),e.showAlpha?(m(),$(z,{key:0,ref_key:"alpha",ref:v,color:_(y),disabled:_(c)},null,8,["color","disabled"])):D("v-if",!0),e.predefine?(m(),$(Z,{key:1,ref:"predefine","enable-alpha":e.showAlpha,color:_(y),colors:e.predefine,disabled:_(c)},null,8,["enable-alpha","color","colors","disabled"])):D("v-if",!0),g("div",{class:k(_(o).e("footer"))},[O(_(R),{ref_key:"inputRef",ref:f,modelValue:p.value,"onUpdate:modelValue":e=>p.value=e,"validate-event":!1,size:"small",disabled:_(c),onChange:C},null,8,["modelValue","onUpdate:modelValue","disabled"]),P(e.$slots,"footer")],2)],2))}}),[["__file","color-picker-panel.vue"]]));export{Q as C,le as E,J as R,G as c,ae as u};
