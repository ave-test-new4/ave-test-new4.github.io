import{cN as l,I as n,j as e,aG as s,mI as u,mJ as a,eR as o}from"./LNDzZpPm.js";const t=l("v2ws",(()=>{const l=n(null),t=n(!1),T=e({[s.PORTRAIT_STATISTICS]:null,[s.TWITTER_MONITOR]:null,[s.PUBLIC_TWITTER]:null,[s.PUMPSTATE]:null,[s.TOKEN_UPDATED]:null}),r=n=>{if(l.value)return;const e=`${(u()||location.origin).replace("http","ws")}/v2ws`;l.value=new a({url:e,...n||{}}),l.value.onopen((()=>{t.value=!0})).onclose((()=>{t.value=!1})).onmessage((l=>{const n=o(l);if(!n)return;const{event:e,data:u}=n;e===s.PORTRAIT_STATISTICS?T[e]=null==u?void 0:u.updates:e===s.TWITTER_MONITOR||e===s.PUBLIC_TWITTER?T[e]=null==u?void 0:u.post:e===s.PUMPSTATE?T[e]=null==u?void 0:u.msgs:e===s.TOKEN_UPDATED?T[e]=null==u?void 0:u.msg:T[e]=u}),"main")};return{getWSInstance:function(){if(!l.value){const l=`${(u()||location.origin).replace("http","ws")}/v2ws`;r({url:l})}return l.value},isConnected:t,init:r,send:(n,e)=>{var s;if(!l.value){const l=`${(u()||location.origin).replace("http","ws")}/v2ws`;r(e||{url:l})}return null==(s=l.value)||s.send(n),l.value},close:()=>{var n;t.value=!1,null==(n=l.value)||n.close(),l.value=null},wsResult:T}}));export{t as u};
