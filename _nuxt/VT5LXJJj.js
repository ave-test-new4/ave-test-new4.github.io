import{f as e,V as a,y as t,x as l,g as i,bY as s,ap as n,m as o,or as r,cr as c,aq as u,r as m,n as p,c6 as h,c3 as b,N as d,c as f,o as v,b as x,w as g,a as y,a6 as w,i as F,O as N,B as S,J as k,t as j,G as $,d as _,A as B,a1 as U,D as z,bU as C,s as L,F as A,_ as H}from"./LNDzZpPm.js";import{_ as M}from"./CjgWAcEl.js";import{_ as D}from"./C3-dVZ_q.js";import{p as R,P as T}from"./U5-fCKw5.js";import{_ as O}from"./ChJyTir2.js";import"./saZFXB17.js";import"./B4pLZScH.js";import"./Dl5uLHiY.js";import"./CdYdV4TG.js";import"./vmSyQCMq.js";import"./CqaOUC0Y.js";const V=["src"],W={class:"w-full h-full py-12px flex flex-col relative group/item"},I={class:"flex relative justify-between items-center h-16px mb-10px px-12px"},P={class:"flex items-center gap-12px opacity-0 group-hover/item:opacity-100 transition-all duration-300"},q={class:"flex items-center gap-12px opacity-0 group-hover/item:opacity-100 transition-all duration-300"},E={class:"mt--26px flex-1 flex items-center justify-center"},G={key:0,class:"text-center"},J={class:"color-[--white] text-12px lh-18px mb-12px"},Y={key:1,class:"flex flex-1"},K={class:"flex-1 flex flex-col items-center"},Q={class:"flex-1 flex flex-col items-center"},X=H(e({__name:"pnlTracker",setup(e){const H=a(),X=t(),Z=l("pnlBoundingRect",{width:480,height:120,x:250,y:250}),ee=l("pnl-setting",{chain:"solana",background:R,blur:0,opacity:100,solUsdSwitch:!1,showU:!1}),ae=i((()=>{var e;return(null==(e=X.footerTokensPrice.find((e=>e.token===s(ee.value.chain).wmain_wrapper)))?void 0:e.current_price_usd)||0})),te=l("pnlData",{solana:{initBalance:"0",balance:"0",historyList:[]},bsc:{initBalance:"0",balance:"0",historyList:[]}}),le=i((()=>"0"===ie.value.initBalance)),ie=i((()=>te.value[ee.value.chain])),se=i((()=>Number(ie.value.balance)*ae.value)),ne=i((()=>Number(ie.value.balance)-Number(ie.value.initBalance))),oe=i((()=>ne.value/Number(ie.value.initBalance)*100)),re=n();o((()=>re.wsResult[u.ASSET]),(async e=>{const a=e.swap&&e.swap.token===r,t=e.transfer&&e.transfer.token===c&&"bsc"===e.transfer.chain;if(a||t){const{type:a,time:t,chain:l}=e.swap||e.transfer,i="0"===a,s=ie.value.balance,n=await fe(l,!1),o=te.value[l].historyList.slice();o.unshift({isBuy:i,amount:Number(n)-Number(s),time:t,balance:n});const r=o.length>50;te.value[l].historyList=r?o.slice(0,50):o}}));const ce=i((()=>{var e;const a=null==(e=H.userInfo)?void 0:e.addresses;return Array.isArray(a)?Array.from(new Set(a.map((e=>e.address)))):[]}));o((()=>ce.value),((e,a)=>{var t;0===(null==a?void 0:a.length)&&e.length>0&&xe(),(null==(t=ce.value)?void 0:t.length)&&H.subBalanceChange()}),{immediate:!0}),o((()=>ee.value.chain),(e=>{te.value[e].historyList=[],fe(e,!0)}));const ue=(e,a)=>{Z.value.x=e,Z.value.y=a},me=(e,a)=>{Z.value.width=e,Z.value.height=a},pe=i((()=>Math.min(Z.value.width/300,Z.value.height/100))),he=m(!1),be=m(!1);function de(){H.changeConnectVisible(!0)}async function fe(e,a=!1){const t=H.getWalletAddress(e);if(!t)return;const l=await h({chain:e,tokens:[b(e)],walletAddress:t}),i=(null==l?void 0:l[0])||{};return te.value[e].balance=i.balance,a&&(te.value[e].initBalance=i.balance),i.balance}function ve(e){return Number(e)>0?"color-[--up-color]":Number(e)<0?"color-[--down-color]":"color-[--white]"}function xe(){te.value[ee.value.chain].historyList=[],fe(ee.value.chain,!0)}return p((()=>{fe("solana",le.value)})),(e,a)=>{const t=S,l=$,i=M,s=D,n=d("tooltip");return v(),f(A,null,[x(s,{"class-name":"top-0 left-0 fixed draggable z-1000!",initialWidth:F(Z).width,"initial-height":F(Z).height,x:F(Z).x,y:F(Z).y,"min-width":300,"min-height":100,parent:!0,handles:["tl","tm","tr","mr","br","bm","bl","ml"],onOnDragStop:ue,onOnResizing:me},{default:g((()=>[y("img",{src:F(ee).background,alt:"background",class:"absolute top-0 left-0 w-full h-full object-cover",style:w({filter:`blur(${F(ee).blur}px) opacity(${F(ee).opacity}%)`})},null,12,V),y("div",W,[y("div",I,[y("div",P,[N(x(t,{name:"custom:pump-setting",class:"cursor-pointer text-12px color-#FFFFFF99",onClick:a[0]||(a[0]=k((e=>be.value=!0),["self"]))},null,512),[[n,e.$t("setting")]]),N(x(t,{name:"custom:history-fill",class:"cursor-pointer text-16px color-#FFFFFF99",onClick:a[1]||(a[1]=k((e=>he.value=!0),["self"]))},null,512),[[n,e.$t("history")]])]),y("div",q,[N(x(t,{name:"custom:reset2",class:"cursor-pointer text-12px color-#FFFFFF99",onDblclick:k(xe,["self"])},null,512),[[n,e.$t("dbClickReset")]]),x(t,{name:"material-symbols:close",class:"cursor-pointer text-16px color-#FFFFFF99",onClick:a[2]||(a[2]=k((e=>F(X).pnlTrackerVisible=!1),["self"]))})])]),y("div",E,[F(H).evmAddress?(v(),f("div",Y,[y("div",K,[y("div",{class:"color-[--white] font-bold mb-2px flex items-center gap-4px",style:w({fontSize:16*F(pe)+"px",lineHeight:20*F(pe)+"px"})},[x(i,{chain:F(ee).chain,width:16*F(pe)},null,8,["chain","width"]),_(" "+j(F(ee).solUsdSwitch?"$"+("formatNumber"in e?e.formatNumber:F(U))(F(se),1):("formatNumber"in e?e.formatNumber:F(U))(F(ie).balance,3)),1)],4),F(ee).showU?(v(),f("span",{key:0,class:"color-[--white] mb-2px",style:w({fontSize:10*F(pe)+"px",lineHeight:12*F(pe)+"px"})}," $"+j(("formatNumber"in e?e.formatNumber:F(U))(F(se),1)),5)):B("",!0),y("div",{class:"color-#FFFFFF99",style:w({fontSize:12*F(pe)+"px",lineHeight:16*F(pe)+"px"})},j(e.$t("balance1")),5)]),y("div",Q,[y("div",{class:"color-[--white] font-bold mb-2px flex items-center gap-4px",style:w({fontSize:16*F(pe)+"px",lineHeight:20*F(pe)+"px"})},[x(i,{chain:F(ee).chain,width:16*F(pe)},null,8,["chain","width"]),y("span",{class:z(ve(F(ne)))},j(("addSign"in e?e.addSign:F(C))(F(ne)))+j(F(ee).solUsdSwitch?"$"+("formatNumber"in e?e.formatNumber:F(U))(Math.abs(F(ne)*F(ae)),1):("formatNumber"in e?e.formatNumber:F(U))(Math.abs(F(ne)),3)),3)],4),F(ee).showU?(v(),f("span",{key:0,class:z(["mb-2px",ve(F(ne))]),style:w({fontSize:10*F(pe)+"px",lineHeight:12*F(pe)+"px"})},j(("addSign"in e?e.addSign:F(C))(F(ne)))+"$"+j(("formatNumber"in e?e.formatNumber:F(U))(Math.abs(F(ne)*F(ae)),1)),7)):B("",!0),y("div",{class:z(ve(F(ne))),style:w({fontSize:12*F(pe)+"px",lineHeight:16*F(pe)+"px"})},j(("addSign"in e?e.addSign:F(C))(F(ne)))+j(("formatNumber"in e?e.formatNumber:F(U))(Math.abs(F(oe)),1))+"% ",7)])])):(v(),f("div",G,[y("div",J,j(e.$t("notLogin")),1),x(l,{size:"small",class:"[&&]:[--el-button-border-color:--white] [&&]:[--el-button-hover-text-color:--white] [&&]:[--el-button-hover-border-color:--white] [&&]:[--el-button-hover-bg-color:transparent] [&&]:[--el-button-bg-color:transparent] [&&]:[--el-button-text-color:--white]",onClick:de},{default:g((()=>[_(j(e.$t("login")),1)])),_:1})]))])])])),_:1},8,["initialWidth","initial-height","x","y"]),x(T,{visible:F(be),"onUpdate:visible":a[3]||(a[3]=e=>L(be)?be.value=e:null),pnlSetting:F(ee),"onUpdate:pnlSetting":a[4]||(a[4]=e=>L(ee)?ee.value=e:null)},null,8,["visible","pnlSetting"]),x(O,{visible:F(he),"onUpdate:visible":a[5]||(a[5]=e=>L(he)?he.value=e:null),chain:F(ee).chain,list:F(ie).historyList,getColorClass:ve},null,8,["visible","chain","list"])],64)}}}),[["__scopeId","data-v-232b2c89"]]);export{X as default};
