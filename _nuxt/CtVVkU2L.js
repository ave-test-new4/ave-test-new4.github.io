import{f as e,am as l,v as a,aE as t,aR as o,h as s,y as i,V as n,W as r,R as d,r as u,I as c,g as p,n as m,N as v,c as f,o as x,a as y,b,K as h,A as g,i as k,aT as w,aU as N,d as _,O as A,t as T,B as S,s as L,w as $,F as z,C as I,bY as R,a1 as j,ab as U,aw as V,bv as C,_ as D,bI as Y,Q as E,aL as P,aK as q,G as M,J as O,D as F,e as H,a8 as Z,a7 as B,a9 as W,a$ as K,o0 as X,m as G,e3 as J,a2 as Q,U as ee,x as le,bV as ae,q as te,bX as oe}from"./LNDzZpPm.js";import{a as se,E as ie}from"./DQUqQXp4.js";import"./BcS6nOuf.js";import"./CqaOUC0Y.js";import{_ as ne}from"./CjgWAcEl.js";import{S as re}from"./D6i2W5JX.js";import{u as de,_ as ue,T as ce}from"./D-2c-luy.js";import{g as pe,h as me,i as ve,j as fe}from"./-Rp-PRm7.js";import{a as xe,E as ye}from"./CyofXtRf.js";import{_ as be}from"./YO5qlHXs.js";import"./saZFXB17.js";import"./vmSyQCMq.js";import"./CdYdV4TG.js";import"./BZp9YwGa.js";import"./DuC4p7MX.js";const he={class:"w-full"},ge={class:"flex-start"},ke={class:"flex gap-6"},we={class:"flex items-center mb-1.5"},Ne={class:"flex items-center gap-2"},_e={class:"statistic-address-copy flex items-center justify-center px-2 py-1.75 h-6 rounded text-3 gap-1 text-[--third-text] bg-[--main-input-button-bg]"},Ae={class:"flex-start",style:{gap:"4px"}},Te={class:"flex mt-27px gap-12px"},Se={class:"item bg-[--secondary-bg] px-24px py-24px rounded-8px flex-1 flex flex-col items-center"},Le={class:"text-14px color-[--third-text] block mb-10px"},$e={key:0,class:"text-18px color-[--up-color]"},ze={key:1,class:"text-18px color-[--down-color]"},Ie={key:2,class:"text-18px color-[--secondary-text]"},Re={key:3,class:"text-12px color-[--up-color]"},je={key:4,class:"text-12px color-[--down-color]"},Ue={class:"item bg-[--secondary-bg] px-24px py-24px rounded-8px flex-1 flex flex-col items-center"},Ve={class:"text-14px color-[--third-text] block mb-10px"},Ce={key:0,class:"text-18px color-[--up-color]"},De={key:1,class:"text-18px color-[--down-color]"},Ye={key:2,class:"text-18px color-[--secondary-text]"},Ee={key:3,class:"text-12px color-[--up-color]"},Pe={key:4,class:"text-12px color-[--down-color]"},qe={class:"item bg-[--secondary-bg] px-24px py-24px rounded-8px flex-1 flex flex-col items-center"},Me={class:"text-14px color-[--third-text] block mb-10px"},Oe={key:0,class:"text-18px color-[--main-text]"},Fe={key:1,class:"text-18px color-[--secondary-text]"},He={class:"item bg-[--secondary-bg] px-24px py-24px rounded-8px flex-1 flex flex-col items-center"},Ze={class:"text-14px color-[--third-text] block mb-10px"},Be={class:"text-18px color-[--secondary-text]"},We={key:0,class:"color-[--up-color]"},Ke={key:1,class:"color-[--secondary-text]"},Xe={key:2,class:"color-[--secondary-text]"},Ge={key:3,class:"color-[--secondary-text]"},Je={class:"item bg-[--secondary-bg] px-24px py-24px rounded-8px flex-1 flex flex-col items-center"},Qe={class:"text-14px color-[--third-text] block mb-10px"},el={key:0,class:"text-18px color-[--main-text]"},ll={key:1,class:"text-18px color-[--secondary-text]"},al=D(e({__name:"statistic",props:{chain:{type:String,default:""},address:{type:String,default:""},followAddress:{type:String,default:""}},setup(e,{expose:D}){const Y=e,{copyObj:E,copyOrder:P}=l(de()),{getFollowingInfo:q}=de(),{t:M}=a(),O=t();o();const{address:F,chain:H,followAddress:Z}=s(Y);i();const B=n(),W=r();d();const{userInfo:K}=l(n());u({value:"",isEdit:!1,loading:!1});const X=c("");u({profit:[],total_balance_without_risk:void 0});const G=p((()=>{var e,l,a,t,o,s;const i=(null==(a=null==(l=null==(e=P.value)?void 0:e.copyList)?void 0:l.filter((e=>e.followAddress==Z.value)))?void 0:a.map((e=>e.chain)))||[];if(B.evmAddress){const e=null==(s=null==(o=null==(t=B.userInfo)?void 0:t.addresses)?void 0:o.filter)?void 0:s.call(o,(e=>null==i?void 0:i.includes(e.chain)));if(e&&e.length>0)return e}return[{chain:H.value}]})),J=p((()=>Z.value.slice(0,4)+"..."+Z.value.slice(-4)));async function Q(e){var l,a,t;E.value=null==(a=null==(l=P.value)?void 0:l.copyList)?void 0:a.find((l=>l.chain===e&&l.followAddress==Z.value)),(null==(t=E.value)?void 0:t.id)?ee():E.value={followAddress:Z.value,creatorAddress:F.value,totalTokenCount:0,winToken:0,profitRealized:"0",profitUnrealized:"0",lastSwap:"0",chain:X.value};const o={name:"copy-trade-wallet",params:{userAddress:E.value.followAddress,chain:E.value.chain},query:{followAddress:E.value.followAddress,creatorAddress:E.value.creatorAddress,id:E.value.id}};V(o)}function ee(){var e,l;const a={id:(null==(e=E.value)?void 0:e.id)||O.query.id,chain:(null==(l=E.value)?void 0:l.chain)||O.params.chain};pe(a).then((e=>{E.value={...e,lastSwap:"1970-01-01T00:00:00Z"!==(null==e?void 0:e.lastSwap)&&"0001-01-01T00:00:00Z"!==(null==e?void 0:e.lastSwap)?e.lastSwap:"0"}}))}function le(){ee()}function ae(){window.open(C(H.value,F.value,"address"))}return p((()=>(null==B?void 0:B.evmAddress)||(null==W?void 0:W.address)||"")),m((async()=>{var e,l,a,t,o;X.value=H.value,0!=(null==(l=null==(e=P.value)?void 0:e.copyList)?void 0:l.length)&&P.value||(await q(),E.value=null==(t=null==(a=P.value)?void 0:a.copyList)?void 0:t.find((e=>e.chain===X.value&&e.followAddress==Z.value))),((null==(o=E.value)?void 0:o.id)||O.query.id)&&ee()})),D({mergeStatistics:function(e){}}),(e,l)=>{var a,t,o,s,i,n,r,d,u,c,p,m,V,C,D,P,q,M,O,H,W,K,ee,te,oe,de,ce,pe,me,ve,fe,xe;const ye=S,be=ie,al=se,tl=v("copy");return x(),f("div",he,[y("div",ge,[y("div",ke,[(x(),h(w,{key:null==(a=k(E))?void 0:a.followAddress,wallet_logo:{url:null==(t=k(E))?void 0:t.followAddress,logo:null==(o=k(E))?void 0:o.followIconUrl},address:k(Z),chain:k(X),iconSize:"60px"},null,8,["wallet_logo","address","chain"])),y("div",null,[y("div",we,[k(F)?(x(),h(N,{key:k(Z),class:"gap-1.5 text-6 leading-7.5 text-[--main-text]",address:k(Z),chain:k(X),remark:null==(s=k(E))?void 0:s.followName,iconEditSize:"16px",maxRemarkLength:15,onUpdateRemark:l[0]||(l[0]=({remark:e})=>k(E).followName=e)},null,8,["address","chain","remark"])):g("",!0)]),y("div",Ne,[y("div",{class:"statistic-address flex gap-2.5 cursor-pointer",onClick:ae},[y("div",_e,[_(T(k(J))+" ",1),A(b(ye,{name:"bxs:copy",class:"text-2.5 clickable text-[--third-text]"},null,512),[[tl,k(Z)]])])])])])]),l[2]||(l[2]=y("div",{class:"flex-1"},null,-1)),b(al,{class:"mr-9px",style:{width:"120px"},"suffix-icon":re,modelValue:k(X),"onUpdate:modelValue":l[1]||(l[1]=e=>L(X)?X.value=e:null),onChange:Q},{prefix:$((()=>[b(ne,{chain:k(X),width:16},null,8,["chain"])])),default:$((()=>[(x(!0),f(z,null,I(k(G),(({chain:l})=>{var a;return x(),h(be,{key:l,label:null==(a=("getChainInfo"in e?e.getChainInfo:k(R))(l))?void 0:a.name,value:l},{default:$((()=>{var a;return[y("div",Ae,[b(ne,{chain:l,width:16},null,8,["chain"]),_(" "+T(null==(a=("getChainInfo"in e?e.getChainInfo:k(R))(l))?void 0:a.name),1)])]})),_:2},1032,["label","value"])})),128))])),_:1},8,["modelValue"]),k(B).evmAddress?(x(),h(ue,{key:0,id:null==(i=k(E))?void 0:i.id,chain:Y.chain,status:k(E).status,onUpdataRow:le},null,8,["id","chain","status"])):g("",!0)]),y("div",Te,[y("div",Se,[y("span",Le,T(e.$t("realizedProfit")),1),y("div",null,[Number(null==(n=k(E))?void 0:n.profitRealized)>0?(x(),f("span",$e,"+$"+T(("formatNumber"in e?e.formatNumber:k(j))((null==(r=k(E))?void 0:r.profitRealized)||0,2)),1)):Number(null==(d=k(E))?void 0:d.profitRealized)<0?(x(),f("span",ze,"-$"+T(("formatNumber"in e?e.formatNumber:k(j))(Math.abs(Number((null==(u=k(E))?void 0:u.profitRealized)||0)),2)),1)):(x(),f("span",Ie,"0")),Number(null==(c=k(E))?void 0:c.profitRealizedRatio)>0?(x(),f("span",Re,"("+T(("formatNumber"in e?e.formatNumber:k(j))((null==(p=k(E))?void 0:p.profitRealizedRatio)||0,2))+"%)",1)):Number(null==(m=k(E))?void 0:m.profitRealizedRatio)<0?(x(),f("span",je,"("+T(("formatNumber"in e?e.formatNumber:k(j))((null==(V=k(E))?void 0:V.profitRealizedRatio)||0,2))+"%)",1)):g("",!0)])]),y("div",Ue,[y("span",Ve,T(e.$t("unrealizedProfit")),1),y("div",null,[Number(null==(C=k(E))?void 0:C.profitUnrealized)>0?(x(),f("span",Ce,"+$"+T(("formatNumber"in e?e.formatNumber:k(j))((null==(D=k(E))?void 0:D.profitUnrealized)||0,2)),1)):Number(null==(P=k(E))?void 0:P.profitUnrealized)<0?(x(),f("span",De,"-$"+T(("formatNumber"in e?e.formatNumber:k(j))(Math.abs(Number((null==(q=k(E))?void 0:q.profitUnrealized)||0)),2)),1)):(x(),f("span",Ye,"0")),Number(null==(M=k(E))?void 0:M.profitUnrealizedRatio)>0?(x(),f("span",Ee,"("+T(("formatNumber"in e?e.formatNumber:k(j))((null==(O=k(E))?void 0:O.profitUnrealizedRatio)||0,2))+"%)",1)):Number(null==(H=k(E))?void 0:H.profitUnrealizedRatio)<0?(x(),f("span",Pe,"("+T(("formatNumber"in e?e.formatNumber:k(j))((null==(W=k(E))?void 0:W.profitUnrealizedRatio)||0,2))+"%)",1)):g("",!0)])]),y("div",qe,[y("span",Me,T(e.$t("positionsValue")),1),Number(null==(K=k(E))?void 0:K.holdingUsd)>0?(x(),f("span",Oe,"$"+T(("formatNumber"in e?e.formatNumber:k(j))((null==(ee=k(E))?void 0:ee.holdingUsd)||0,2)),1)):(x(),f("span",Fe,"0"))]),y("div",He,[y("span",Ze,T(e.$t("winTokenTotal")),1),y("div",Be,[Number(null==(te=k(E))?void 0:te.winToken)>0?(x(),f("span",We,T(("formatNumber"in e?e.formatNumber:k(j))((null==(oe=k(E))?void 0:oe.winToken)||0,2)),1)):(x(),f("span",Ke,"0")),l[3]||(l[3]=_(" / ")),Number(null==(de=k(E))?void 0:de.totalTokenCount)>0?(x(),f("span",Xe,T(("formatNumber"in e?e.formatNumber:k(j))((null==(ce=k(E))?void 0:ce.totalTokenCount)||0,2)),1)):(x(),f("span",Ge,"0"))])]),y("div",Je,[y("span",Qe,T(e.$t("lastSwapTime")),1),Number(null==(pe=k(E))?void 0:pe.createTime)>0?(x(),f("span",el,T(Number(null==(me=k(E))?void 0:me.createTime)>0?("formatDate"in e?e.formatDate:k(U))((null==(ve=k(E))?void 0:ve.createTime)||0,"YYYY-MM-DD HH:mm"):"--")+" ~ "+T(Number(null==(fe=k(E))?void 0:fe.finishTime)>0?("formatDate"in e?e.formatDate:k(U))((null==(xe=k(E))?void 0:xe.finishTime)||0,"YYYY-MM-DD HH:mm"):e.$t("today")),1)):(x(),f("span",ll,"--"))])])])}}}),[["__scopeId","data-v-c0a0ef0f"]]),tl={key:1},ol={class:"mt-20px flex justify-between"},sl={key:0,class:"bg-[#12B8861A] color-[--up-color] px-4px rounded-2px ml-5px text-10px"},il={key:1,class:"bg-[#F6465D1A] color-[--down-color] px-4px rounded-2px ml-5px text-10px"},nl={class:"flex items-center flex-1"},rl={class:"flex flex-col items-start"},dl={class:"text-12px flex items-center"},ul=["src"],cl={class:"text-12px"},pl={key:0,class:"color-[--up-color]"},ml={key:1,class:"color-[--down-color]"},vl={key:2,class:"color-[--third-text]"},fl={class:"color-[--down-color] text-12px"},xl={class:"flex-end"},yl={class:"ml-5 a-gray font-16",href:"javascript:;"},bl=D(e({__name:"tokenList",props:{tableData:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1},type:{type:String,default:""},address:String},emits:["search"],setup(e,{expose:l,emit:i}){const d=e,{tableData:m,loading:w,type:N,address:L}=s(d),R=i;l({reset:ie});const{t:V}=a();u(!1),u({}),c(!1);const D=Y(),X=t(),G=o();function J(e){"token"==N.value?D.$patch({drawerVisible:!0,tokenInfo:{id:e.token+"-"+e.chain,symbol:e.symbol,logo_url:e.logo_url,chain:e.chain,address:e.token,remark:""},pairInfo:{target_token:e.token,token0_address:e.token,token0_symbol:e.symbol,token1_symbol:"",pairAddress:""},user_address:X.params.userAddress||n().getWalletAddress(e.chain)||r().address}):Q(e)}const Q=e=>{G.push({name:"token-id",params:{id:e.token+"-"+e.chain},query:{from:X.name}})};const ee=u({checkAll:!0}),le=u({type:{visible:!1,checkAll:!1,checkedTrend:[],isIndeterminate:!1}}),ae=p((()=>[{id:"buy",name:"买入"},{id:"sell",name:"卖出"}]));function te(e){var l;le.value.type.checkedTrend=e?null==(l=ae.value)?void 0:l.map((e=>e.id)):[],le.value.type.isIndeterminate=!1}function oe(e){const l=e.length,a=l===ae.value.length,t=l>0&&l<ae.value.length;le.value.type.checkAll=a,le.value.type.isIndeterminate=t}function se(){R("search",{type:le.value.type.checkAll?"all":le.value.type.checkedTrend}),le.value.type.visible=!1}function ie(){le.value.type.checkAll=!0,le.value.type.checkedTrend=["buy","sell"],le.value.type.isIndeterminate=!0}function re(){ie(),se()}return V("copyErrorLog2"),V("copyErrorLog3"),V("copyErrorLog4"),V("copyErrorLog5"),V("copyErrorLog6"),V("copyErrorLog7"),V("copyErrorLog8"),(e,l)=>{const a=S,t=P,o=q,s=M,i=E,n=ye,r=B,d=Z,u=H,c=be,p=ne,L=xe,R=v("tooltip");return x(),f("div",null,[b(L,{ref:"table_ref",data:k(m),fit:"","header-row-class-name":"text-12px sticky top-0 z-10 font-500","cell-class-name":"color-[--secondary-text]","row-class-name":"cursor-pointer",onRowClick:J},{empty:$((()=>[k(w)||0!==k(m).length?(x(),f("span",tl)):(x(),h(K,{key:0,class:"pt-[40px]"}))])),default:$((()=>["success"===k(N)||"failed"===k(N)?(x(),h(n,{key:0,label:e.$t("type"),fixed:"left"},{header:$((()=>[y("span",null,T(e.$t("type")),1),b(i,{visible:k(le).type.visible,"onUpdate:visible":l[2]||(l[2]=e=>k(le).type.visible=e),placement:"bottom",width:207,trigger:"click"},{reference:$((()=>[b(a,{name:"custom:filter",class:F(["cursor-pointer text-10px ml-3px",k(ee).checkAll?"color-[--third-text]":"color-[--primary-color]"])},null,8,["class"])])),default:$((()=>[y("div",null,[b(t,{modelValue:k(le).type.checkAll,"onUpdate:modelValue":l[0]||(l[0]=e=>k(le).type.checkAll=e),indeterminate:k(le).type.isIndeterminate,onChange:te},{default:$((()=>[_(T(e.$t("all")),1)])),_:1},8,["modelValue","indeterminate"]),b(o,{modelValue:k(le).type.checkedTrend,"onUpdate:modelValue":l[1]||(l[1]=e=>k(le).type.checkedTrend=e),class:"flex flex-col",onChange:oe},{default:$((()=>[(x(!0),f(z,null,I(k(ae),((e,l)=>(x(),h(t,{key:l,label:e.name,value:e.id},{default:$((()=>[_(T(e.name),1)])),_:2},1032,["label","value"])))),128))])),_:1},8,["modelValue"])]),y("div",ol,[b(s,{size:"default",class:"h-30px flex-1",onClick:O(re,["stop"])},{default:$((()=>[_(T(e.$t("cancel")),1)])),_:1}),b(s,{size:"default",type:"primary",class:"h-30px flex-1",onClick:O(se,["stop"])},{default:$((()=>[_(T(e.$t("confirm")),1)])),_:1})])])),_:1},8,["visible"])])),default:$((({row:l})=>[7==l.swapType?(x(),f("span",sl,T(e.$t("buy")),1)):(x(),f("span",il,T(e.$t("sell")),1))])),_:1},8,["label"])):g("",!0),b(n,{label:e.$t("token"),align:"left"},{default:$((({row:l})=>[b(u,{class:"px-10px flex items-center h-50px cursor-pointer",to:`/token/${l.token}-${l.chain}`},{default:$((()=>[y("div",nl,[b(d,{"popper-class":"tooltip-pd-0",placement:"bottom-start","show-arrow":!1},{default:$((()=>[b(r,{class:"mr-8px",row:l},null,8,["row"])])),content:$((()=>[b(r,{row:l,"chain-class":"hidden","token-class":"w-240px h-240px [&&]:mr-0 rounded-16px"},null,8,["row"])])),_:2},1024),y("div",rl,[y("span",dl,[_(T(l.symbol)+" ",1),l.issue_platform?A((x(),f("img",{key:0,class:"ml-5px w-10px h-10px rounded-full",src:("formatIconTag"in e?e.formatIconTag:k(W))(l.issue_platform),alt:""},null,8,ul)),[[R,l.issue_platform]]):g("",!0)])])])])),_:2},1032,["to"])])),_:1},8,["label"]),"token"===k(N)?(x(),h(n,{key:1,label:e.$t("totalPnL"),align:"right",prop:"token_profit_rate","min-width":110},{default:$((({row:l})=>[y("div",null,[b(c,{value:null==l?void 0:l.totalProfit,signVisible:!0},{default:$((()=>[_(T(("formatNumber"in e?e.formatNumber:k(j))(Math.abs(Number((null==l?void 0:l.totalProfit)??0)),2)),1)])),_:2},1032,["value"]),y("div",cl,[(null==l?void 0:l.totalProfitRatio)>0?(x(),f("span",pl,T(("formatNumber"in e?e.formatNumber:k(j))(100*(null==l?void 0:l.totalProfitRatio)||0,2))+"% ",1)):(null==l?void 0:l.totalProfitRatio)<0?(x(),f("span",ml,T(("formatNumber"in e?e.formatNumber:k(j))(100*(null==l?void 0:l.totalProfitRatio)||0,2))+"% ",1)):(x(),f("span",vl,"0"))])])])),_:1},8,["label"])):g("",!0),"success"===k(N)||"token"===k(N)?(x(),h(n,{key:2,label:e.$t("positionsValue"),align:"right","min-width":110},{default:$((({row:l})=>[y("div",{class:F((null==l?void 0:l.value)?"":"color-text-3")}," $"+T((null==l?void 0:l.value)>0?("formatNumber"in e?e.formatNumber:k(j))((null==l?void 0:l.value)||0,2):0),3)])),_:1},8,["label"])):g("",!0),"success"===k(N)||"token"===k(N)?(x(),h(n,{key:3,label:e.$t("price"),align:"right"},{default:$((({row:l})=>[y("div",{class:F((null==l?void 0:l.price)?"":"color-text-3")}," $"+T((null==l?void 0:l.price)>0?("formatNumber"in e?e.formatNumber:k(j))((null==l?void 0:l.price)||(null==l?void 0:l.price)||0):0),3)])),_:1},8,["label"])):g("",!0),b(n,{label:e.$t("amount"),align:"right"},{default:$((({row:l})=>[y("div",{class:F((null==l?void 0:l.amount)?"":"color-text-3")},T((null==l?void 0:l.amount)>0?("formatNumber"in e?e.formatNumber:k(j))((null==l?void 0:l.amount)||0,2):0),3)])),_:1},8,["label"]),b(n,{label:e.$t("time"),align:"right","min-width":110},{default:$((({row:l})=>[_(T(Number(null==l?void 0:l.lastSwap)>0?("formatDate"in e?e.formatDate:k(U))((null==l?void 0:l.lastSwap)||0,"YYYY-MM-DD HH:mm"):"--"),1)])),_:1},8,["label"]),"failed"===k(N)?(x(),h(n,{key:4,label:e.$t("reasonFailure"),align:"right"},{default:$((({row:e})=>[y("span",fl,T(e.errorLog),1)])),_:1},8,["label"])):g("",!0),b(n,{label:e.$t("chain"),align:"right"},{default:$((({row:e})=>[y("div",xl,[b(p,{chain:e.chain,width:16},null,8,["chain"])])])),_:1},8,["label"]),"success"===k(N)?(x(),h(n,{key:5,align:"right",label:"TXN"},{default:$((({row:e})=>[y("a",yl,[b(a,{name:"custom:browser",class:"text-16px color-[--third-text] cursor-pointer",onClick:O((l=>function(e){const l=C(null==e?void 0:e.chain,null==e?void 0:e.txHash,"tx");window.open(l)}(e)),["stop","self"])},null,8,["onClick"])])])),_:1})):g("",!0)])),_:1},8,["data"])])}}}),[["__scopeId","data-v-00726b8e"]]),hl={class:"flex justify-between mb-10px mt-20px"},gl={class:"flex items-center gap-24px"},kl=["onClick"],wl={key:0},Nl=["infinite-scroll-disabled"],_l={class:"mt-[2px] mb-[5px] py-[10px] text-[12px] text-center color-[--third-text]"},Al={key:0},Tl=e({__name:"statisticsTable",props:{chain:{type:String,default:"bsc"},address:{type:String,default:""},followAddress:{type:String,default:""},orderId:{type:Number,default:0}},setup(e){const{copyObj:a}=l(de()),t=X(),o=e,s=u("token"),i=u(null),n=u({finished:!1,error:!1,loading:!1,pageNo:0,pageSize:20,total:0,tokenList:[],successList:[],failedList:[]}),r=c("all"),d=c(0),v=p((()=>[{title:t("copyToken"),id:"token"},{title:t("copyCompleted"),id:"success"},{title:t("copyFailed"),id:"failed"}])),h=p((()=>[o.chain,o.address])),w=p((()=>{var e;if("token"==s.value){let l=[...n.value.tokenList];return d.value&&(l=null==(e=[...n.value.tokenList])?void 0:e.filter((e=>(null==e?void 0:e.amount)>0))),l.sort(((e,l)=>(l.lastSwap||0)-(e.lastSwap||0))),l}return"success"==s.value?[...n.value.successList]:[...n.value.failedList]}));function N(){"token"==s.value?R():"success"==s.value?j():U()}function S({type:e}){V(),r.value=e,"success"==s.value?j():U()}const R=async()=>{if(!o.orderId)return;n.value.loading=!0;const e={walletAddress:o.address,followAddress:o.followAddress,chain:o.chain,period:"all",sortBy:"lastSwap",sortOrder:"desc"};try{const l=await me(e);n.value.tokenList=null==l?void 0:l.map((e=>({...e,chain:o.chain,value:e.holdingValue||0,amount:e.holdingAmount||0,price:(null==e?void 0:e.currentPriceUsd)||0})))}catch{n.value.tokenList=[]}finally{n.value.loading=!1}};function j(){if(!o.orderId)return;n.value.loading=!1;const e={walletAddress:o.address,chain:o.chain,id:Number(o.orderId),swapType:r.value||"all",pageSize:n.value.pageSize,pageNo:n.value.pageNo};ve(e).then((e=>{0===n.value.pageNo&&(n.value.successList=[]);const l=Array.isArray(e)?null==e?void 0:e.map((e=>{var l;return{...e,amount:new Q(e.amount||0).div(10**(null==e?void 0:e.decimals)),lastSwap:"1970-01-01T00:00:00Z"!==(null==e?void 0:e.time)&&"0001-01-01T00:00:00Z"!==(null==e?void 0:e.lastSwap)?null==(l=new Date(null==e?void 0:e.time).getTime()/1e3)?void 0:l.toFixed(0):"0"}})):[];if((null==l?void 0:l.length)>0){const e=[...n.value.successList],a=l.filter((l=>e.every((e=>!(e.id===l.id&&e.chain===l.chain)))));n.value.successList=[...e,...a]}n.value.finished=(null==l?void 0:l.length)<n.value.pageSize,n.value.finished||n.value.pageNo++})).catch((()=>{n.value.successList=[],n.value.error=!0})).finally((()=>{n.value.loading=!1}))}function U(){if(!o.orderId)return;n.value.loading=!1;const e={walletAddress:o.address,chain:o.chain,id:Number(o.orderId),swapType:r.value||"all",pageSize:n.value.pageSize,pageNo:n.value.pageNo};fe(e).then((e=>{0===n.value.pageNo&&(n.value.failedList=[]);const l=Array.isArray(e)?null==e?void 0:e.map((e=>{var l;return{...e,amount:new Q(e.amount||0).div(10**(null==e?void 0:e.decimals)),lastSwap:"1970-01-01T00:00:00Z"!==(null==e?void 0:e.time)&&"0001-01-01T00:00:00Z"!==(null==e?void 0:e.lastSwap)?null==(l=new Date(null==e?void 0:e.time).getTime()/1e3)?void 0:l.toFixed(0):"0"}})):[];if((null==l?void 0:l.length)>0){const e=[...n.value.failedList],a=l.filter((l=>e.every((e=>!(e.token===l.token&&e.chain===l.chain)))));n.value.failedList=[...e,...a]}n.value.finished=(null==l?void 0:l.length)<n.value.pageSize,n.value.finished||n.value.pageNo++})).catch((()=>{n.value.failedList=[],n.value.error=!0})).finally((()=>{n.value.loading=!1}))}const V=()=>{n.value.pageNo=0,n.value.finished=!1,n.value.error=!1,n.value.loading=!0};return G(h,(()=>{var e;o.address&&o.chain&&(r.value="all",null==(e=i.value)||e.reset(),V(),N())})),m((()=>{o.address&&o.chain&&N()})),(l,a)=>{const o=P,u=J;return x(),f("div",null,[y("div",hl,[y("div",gl,[(x(!0),f(z,null,I(k(v),((e,l)=>(x(),f("a",{key:l,class:F("text-14px mb-12px cursor-pointer flex items-center decoration-none lh-20px text-center  bg-[--main-input-button-bg] rounded-4px px-12px py-8px "+(k(s)===e.id?"color-[--main-text] bg-[--primary-color]":"color-[--secondary-text]")),onClick:O((l=>(e=>{var l;s.value!=e.id&&(s.value=e.id,r.value="all",null==(l=i.value)||l.reset(),V(),"token"==s.value?R():"success"==s.value?j():U())})(e)),["stop","prevent"])},T(e.title),11,kl)))),128))]),"token"===k(s)?(x(),f("div",wl,[b(o,{modelValue:k(d),"onUpdate:modelValue":a[0]||(a[0]=e=>L(d)?d.value=e:null),"false-value":0,"true-value":1,class:"color-[--third-text]"},{default:$((()=>[_(T(k(t)("showPositions")),1)])),_:1},8,["modelValue"])])):g("",!0)]),A((x(),f("div",{"infinite-scroll-delay":200,"infinite-scroll-disabled":k(n).loading||k(n).finished||k(n).error,"infinite-scroll-immediate":!1,class:"relative min-h-500px bg-[--secondary-bg]","infinite-scroll-distance":"300"},[b(bl,{ref_key:"tokenList_ref",ref:i,loading:k(n).loading,tableData:k(w),address:e.address,type:k(s),onSearch:S},null,8,["loading","tableData","address","type"]),y("div",_l,[k(n).loading&&k(n).pageNo>1?(x(),f("span",Al,T(k(t)("loading")),1)):g("",!0)])],8,Nl)),[[u,N]])])}}}),Sl=D({__name:"[chain]",setup(e){const{copyObj:s,copyTradeVisible:i}=l(de()),d=ee("scrollRef"),u=t(),c=n(),m=r(),v=le("cachedChain","solana",sessionStorage),y=p((()=>{var e;return u.params.chain?u.params.chain:(null==(e=null==c?void 0:c.userInfo)?void 0:e.evmAddress)?v.value:m.chain||""})),h=p((()=>Number(u.query.id)||s.value.id)),g=p((()=>u.query.followAddress||s.value.followAddress)),w=p((()=>{var e;return u.query.creatorAddress?u.query.creatorAddress:(null==(e=null==c?void 0:c.userInfo)?void 0:e.evmAddress)?c.getWalletAddress(v.value):m.address||""})),{t:N}=a();o();const _=ae(oe.SCROLL_TO_TOP);function A(){d.value.scrollTo({top:0,behavior:"smooth"})}return _.on(A),te((()=>{_.off(A)})),(e,l)=>(x(),f("div",{ref_key:"scrollRef",ref:d,className:"pt-[24px] px-16px bg-[--main-bg] pb-0 w-full"},[b(al,{ref:"statisticRef",followAddress:k(g),address:k(w),chain:k(y)},null,8,["followAddress","address","chain"]),b(Tl,{ref:"statisticsTable",address:k(w),followAddress:k(g),orderId:k(h),chain:k(y)},null,8,["address","followAddress","orderId","chain"]),b(ce,{modelValue:k(i),"onUpdate:modelValue":l[0]||(l[0]=e=>L(i)?i.value=e:null)},null,8,["modelValue"])],512))}},[["__scopeId","data-v-81bd6464"]]);export{Sl as default};
