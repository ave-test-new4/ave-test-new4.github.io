import{f as e,W as a,v as l,e_ as t,I as s,r,g as i,m as n,O as o,e3 as d,c,o as m,b as f,a as u,w as p,i as b,t as x,d as g,a1 as h,D as v,ai as y,bU as w,Q as N,B as _,a5 as F,K as P,a$ as O,A as j,q4 as M}from"./LNDzZpPm.js";import{E as D,a as C}from"./CyofXtRf.js";import"./BcS6nOuf.js";import"./CqaOUC0Y.js";import"./DuC4p7MX.js";const T=["infinite-scroll-disabled"],Y={class:"text-12px"},k={key:1},I={class:"text-14px"},S={class:"flex items-center justify-end gap-4px"},V={class:"color-[--main-text] font-bold mb-8px"},z={class:"flex items-center justify-between text-12px mb-16px"},L={class:"color-[--third-text]"},U={class:"flex items-center justify-between text-12px mb-16px"},B={class:"color-[--third-text]"},A={class:"flex items-center justify-between text-12px mb-16px"},H={class:"color-[--third-text]"},Q={class:"flex items-center justify-between text-12px mb-16px"},$={class:"color-[--third-text]"},q={class:"flex flex-col text-12px mb-16px gap-4px"},E={class:"color-[--third-text]"},K={class:"flex flex-col text-12px"},W={class:"color-[--third-text]"},G={class:"mt-[2px] mb-[5px] py-[10px] text-[12px] text-center color-[--third-text]"},J={key:0},R=e({__name:"closePnl",props:{searchParams:{}},setup(e){const R=a(),{t:X}=l(),Z=e,ee=t(),ae=s([]),le=r({loading:!1,finished:!1,error:!1}),te=r(""),se=i((()=>{var e,a,l;const t=(null==(l=null==(a=null==(e=ee.metadata)?void 0:e.contractList)?void 0:a.reduce)?void 0:l.call(a,((e,a)=>(e[a.contractId]=a.contractName,e)),{}))||{};return t.ALL=X("all"),t})),re=e=>h(e.realizePnl-e.deltaOpenFee),ie=async()=>{if(le.value.loading||le.value.finished)return;const e={filterCloseOnly:!0,...Z.searchParams};te.value&&(e.offsetData=te.value);try{le.value.loading=!0;const a=await M(e);let l=a.dataList||[];te.value&&(l=ae.value.concat(l)),a.nextPageOffsetData||(le.value.finished=!0),te.value=a.nextPageOffsetData,ae.value=l}catch(a){le.value.error=!0}finally{le.value.loading=!1}};return R.address&&ie(),n((()=>[Z.searchParams,R.address]),(()=>{te.value="",ae.value=[],le.value.finished=!1,le.value.error=!1,le.value.loading=!1,ie()})),(e,a)=>{const l=O,t=D,s=_,r=N,i=C,n=d;return o((m(),c("div",{class:"relative min-h-400px bg-[--secondary-bg]","infinite-scroll-delay":200,"infinite-scroll-disabled":b(le).loading||b(le).finished||b(le).error,"infinite-scroll-immediate":!1,"infinite-scroll-distance":300},[f(i,{fit:"",data:b(ae),"header-row-class-name":"text-12px sticky top-0 z-10 font-500","cell-class-name":"color-[--main-text] text-12px"},{empty:p((()=>{var a;return[b(le).loading||0!==(null==(a=b(ae))?void 0:a.length)?(m(),c("span",k)):(m(),P(l,{key:0,class:"pt-[40px]"},{default:p((()=>[u("span",Y,x(e.$t("emptyNoData")),1)])),_:1}))]})),default:p((()=>[f(t,{label:b(X)("markets1"),prop:"contractId"},{default:p((({row:e})=>[u("span",I,x(b(se)[e.contractId]),1)])),_:1},8,["label"]),f(t,{width:120,label:b(X)("Qty")},{default:p((({row:a})=>[g(x(("formatNumber"in e?e.formatNumber:b(h))(a.beforeOpenSize))+" "+x(b(se)[a.contractId].replace("USD","")),1)])),_:1},8,["label"]),f(t,{width:150,align:"right",label:b(X)("entryPrice")},{default:p((({row:a})=>[g(x(("formatNumber"in e?e.formatNumber:b(h))(a.beforeOpenValue/a.beforeOpenSize,{limit:20,decimals:2})),1)])),_:1},8,["label"]),f(t,{width:150,align:"right",label:b(X)("exitPrice")},{default:p((({row:a})=>[g(x(("formatNumber"in e?e.formatNumber:b(h))(a.fillPrice,{limit:20,decimals:2})),1)])),_:1},8,["label"]),f(t,{"min-width":80,align:"right",label:b(X)("tradeType"),prop:"side"},{default:p((({row:e})=>[u("span",{class:v(e.type.includes("BUY")?"color-[--up-color]":"color-[--down-color]")},x(e.type.includes("BUY")?b(X)("buy"):b(X)("sell")),3)])),_:1},8,["label"]),f(t,{align:"right",label:b(X)("closePnl"),prop:"closePnl"},{default:p((({row:a})=>[u("div",S,[u("span",{class:v(("getColorClass"in e?e.getColorClass:b(y))(re(a)))},x(("addSign"in e?e.addSign:b(w))(+re(a)))+x(Math.abs(+re(a))),3),f(r,{width:200},{reference:p((()=>[f(s,{name:"custom:info"})])),default:p((()=>[u("div",null,[u("div",V,x(b(X)("closePnlDetail")),1),u("div",z,[u("span",L,x(b(X)("closeValue")),1),u("span",null,x(("formatNumber"in e?e.formatNumber:b(h))(Math.abs(a.fillCloseValue),{limit:20})),1)]),u("div",U,[u("span",B,x(b(X)("openValue")),1),u("span",null,x(("formatNumber"in e?e.formatNumber:b(h))(Math.abs(a.beforeOpenValue),{limit:20})),1)]),u("div",A,[u("span",H,x(b(X)("fee")),1),u("span",null,x(("formatNumber"in e?e.formatNumber:b(h))(Math.abs(a.fillCloseFee)+Math.abs(a.beforeOpenFee),{limit:20})),1)]),u("div",Q,[u("span",$,x(b(X)("fundingFee")),1),u("span",null,x(("formatNumber"in e?e.formatNumber:b(h))(a.deltaFundingFee,{limit:20})),1)]),u("div",q,[u("span",E,x(b(X)("long2")),1),u("span",null,x(b(X)("longPnl")),1)]),u("div",K,[u("span",W,x(b(X)("short2")),1),u("span",null,x(b(X)("shortPnl")),1)])])])),_:2},1024)])])),_:1},8,["label"]),f(t,{align:"right",label:b(X)("openFee"),prop:"openFee"},{default:p((({row:a})=>[g(x(("formatNumber"in e?e.formatNumber:b(h))(Math.abs(a.beforeOpenFee),{limit:20})),1)])),_:1},8,["label"]),f(t,{align:"right",label:b(X)("closeFee"),prop:"closeFee"},{default:p((({row:a})=>[g(x(("formatNumber"in e?e.formatNumber:b(h))(Math.abs(a.fillCloseFee),{limit:20})),1)])),_:1},8,["label"]),f(t,{align:"right",label:b(X)("fundingFee"),prop:"fundingFee"},{default:p((({row:a})=>[g(x(("formatNumber"in e?e.formatNumber:b(h))(Math.abs(a.deltaFundingFee),{limit:20})),1)])),_:1},8,["label"]),f(t,{align:"right",label:b(X)("exitType"),prop:"exitType"},{default:p((()=>[g(x(b(X)("trades")),1)])),_:1},8,["label"]),f(t,{align:"right",label:b(X)("tradeTime"),prop:"fundingTime"},{default:p((({row:e})=>[g(x(b(F)(+e.censorTime).format("YYYY-MM-DD HH:mm:ss")),1)])),_:1},8,["label"])])),_:1},8,["data"]),u("div",G,[b(le).loading&&b(te)?(m(),c("span",J,x(b(X)("loading")),1)):j("",!0)])],8,T)),[[n,ie]])}}});export{R as default};
