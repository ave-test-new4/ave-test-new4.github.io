import{f as e,aE as r,I as a,r as t,y as s,g as n,m as l,aQ as i,an as o,pT as u,c as d,o as c,b as m,i as p,pI as v,b_ as f,v as b,ce as _,pU as A,a as h,O as j,t as y,ar as k,K as T,w as g,A as N,F as x,C as $,J as w,d as C,B as F,aU as O,a1 as S,a6 as R,aV as U,aW as L,a$ as V,s as I,b6 as K,a4 as E,_ as H,el as M}from"./LNDzZpPm.js";import{L as P,_ as Q}from"./-phAe-sd.js";import{E as z}from"./CqaOUC0Y.js";import"./BPo-K5-z.js";import"./CAu_L1SH.js";import"./4BOpdlp6.js";import"./CdYdV4TG.js";import"./vmSyQCMq.js";import"./DQUqQXp4.js";import"./BcS6nOuf.js";import"./B_bYtbjB.js";import"./njOOFaJF.js";import"./Dmaw2k36.js";import"./7PWpoxWf.js";import"./DsasURJA.js";import"./DuC4p7MX.js";import"./FG6gRdvh.js";import"./CytQXV1W.js";import"./saZFXB17.js";import"./BpVPSrXI.js";import"./BmJn-QVY.js";import"./BZp9YwGa.js";import"./CyofXtRf.js";import"./B4pLZScH.js";import"./CHAOnMYe.js";import"./BrHgemS_.js";import"./Dl5uLHiY.js";import"./FmdACanA.js";import"./fQpEmYRS.js";import"./FpEH-fmd.js";import"./Ct3nesK2.js";import"./4ADxCC58.js";import"./CzFZvokD.js";import"./D6I9a_bc.js";const B=e({__name:"index",props:{currentActiveTab:{type:String,default:"Transactions"}},setup(e){const f=e,b=r(),_=a(!1),A=a(!0),h=t([]),j=a({sort_by:"",order:""}),y=a(""),k=a(""),T=a(""),g=t([]),N=s(),x=n((()=>{var e;return null==(e=b.params)?void 0:e.id})),$=n((()=>{const e=T.value?g.value||[]:h.value||[];return y.value?"sol"==k.value?(null==e?void 0:e.filter((e=>e.sol_first_transfer_in_from==y.value)))||[]:(null==e?void 0:e.filter((e=>e.token_first_transfer_in_from==y.value)))||[]:e||[]}));function w(e){if(!i().currentAddress)return;const r={sort_by:null==e?void 0:e.sort_by,order:null==e?void 0:e.order},a={token_id:x.value,self_address:i().currentAddress,...r};j.value=r,_.value=!0,u(a).then((e=>{const r=(null==e?void 0:e.holderStats)||[];h.value=r||[]})).catch((()=>{h.value=[]})).finally((()=>{_.value=!1}))}function C(e){var r;w({sort_by:e.prop,order:null==(r=e.order)?void 0:r.replace("ending","")})}function F(e){if(T.value=e||"",!T.value)return void w(j.value);const r={token_id:x.value,self_address:i().currentAddress,keyword:T.value};_.value=!0,v(r).then((e=>{g.value=Array.isArray(e)?e:[]})).catch((()=>{g.value=[]})).finally((()=>{_.value=!1}))}function O(e){y.value?(y.value="",k.value=""):(y.value=e.address||"",k.value=e.type||"")}return l((()=>N.headFollowsNum.all),(()=>{"Attention"==f.currentActiveTab&&w()})),l(x,(()=>{"Attention"==f.currentActiveTab&&w()})),l((()=>i().currentAddress),(e=>{e?"Attention"==f.currentActiveTab&&w():h.value=[]})),o((()=>{"Attention"==f.currentActiveTab&&w()})),(e,r)=>(c(),d("div",null,[m(P,{ref:"holdersRef",tableList:p($),loading:p(_),searchOriginKeyword:p(y),searchOriginType:p(k),isAttention:p(A),onHandleSortChange:C,onFilterAddress:F,onFilterOriginAddress:O},null,8,["tableList","loading","searchOriginKeyword","searchOriginType","isAttention"])]))}}),J={class:"histrory"},W={class:"top"},q={key:0,class:"content"},D=["onClick"],G=H(e({__name:"index",props:{currentActiveTab:{type:String,default:"Transactions"}},setup(e){const u=e,v=f(),{t:H}=b(),M=r(),P=a(!1),B=t([]),G=n((()=>{var e;return null==(e=M.params)?void 0:e.id})),X=s(),Y=a(!1),Z=t(),ee=n((()=>v.token)),re=n((()=>{var e;const r=_(M.params.id);return(null==r?void 0:r.chain)||(null==(e=ee.value)?void 0:e.chain)||""})),ae=n((()=>Math.max(v.commonHeight-150,450)));function te(){if(!i().currentAddress)return;const e={token_id:G.value,address:i().currentAddress};P.value=!0,A(e).then((e=>{B.value=e||[]})).finally((()=>{P.value=!1}))}return l((()=>X.headFollowsNum.all),(()=>{"Attention"==u.currentActiveTab&&te()})),l(G,(()=>{"Attention"==u.currentActiveTab&&te()})),l((()=>i().currentAddress),(e=>{e?"Attention"==u.currentActiveTab&&te():B.value=[]})),o((()=>{"Attention"==u.currentActiveTab&&te()})),(e,r)=>{const a=F,t=O,s=V,n=z,l=k;return c(),d("div",J,[h("div",W,[h("span",null,y(e.$t("address")),1),h("span",null,y(e.$t("remark")),1),h("span",null,y(e.$t("buy")),1),h("span",null,y(e.$t("sell")),1),h("span",null,y(e.$t("Txs"))+" ("+y(e.$t("buy1"))+")",1),h("span",null,y(e.$t("Txs"))+" ("+y(e.$t("sell1"))+")",1),h("span",null,y(e.$t("currentPosition")),1),h("span",null,y(e.$t("balance")),1),h("span",null,y(e.$t("profit")),1)]),j((c(),T(n,{height:p(ae)},{default:g((()=>{var n;return[p(B).length>0?(c(),d("ul",q,[(c(!0),d(x,null,$(p(B),((s,n)=>{var l;return c(),d("li",{key:n,class:"flex",onClick:w((e=>function(e){var r;Y.value=!0,null==(r=Z.value)||r.getUserTxs(e.address)}({address:s.user_address})),["stop"])},[h("span",null,[m(a,{ref_for:!0,ref:"attentionTriggerRef",name:"custom:attention",class:"h-16px w-16px clickable shrink-0 color-[#F45469] align-middle",onClick:w((e=>function(e,r){const a={address:i().currentAddress,user_address:e.user_address,user_chain:re.value};K(a).then((()=>{var e;X.getFollowsNum(),E.success(H("attention1Canceled")),null==(e=B.value)||e.splice(r,1)})).catch((e=>{})).finally((()=>{}))}(s,n)),["stop","prevent"])},null,8,["onClick"]),C(" *"+y(null==(l=s.user_address)?void 0:l.slice(-6)),1)]),h("div",{class:"flex-end",onClick:r[0]||(r[0]=w((()=>{}),["stop","prevent"]))},[m(t,{addressClass:"token-symbol ellipsis",addressStyle:"max-width: 70px",showAddressTitle:"",address:s.user_address,chain:p(re),remark:s.remark,onUpdateRemark:({remark:e})=>s.remark=e},null,8,["address","chain","remark","onUpdateRemark"])]),h("div",null,y(("formatNumber"in e?e.formatNumber:p(S))(s.bug_amount||0,2)),1),h("div",null,y(("formatNumber"in e?e.formatNumber:p(S))(s.sell_amount||0,2)),1),h("span",null,y(("formatNumber"in e?e.formatNumber:p(S))(s.bug_count||0,0)),1),h("span",null,y(("formatNumber"in e?e.formatNumber:p(S))(s.sell_count||0,0)),1),h("span",null,y(("formatNumber"in e?e.formatNumber:p(S))(s.current_position||0,2)),1),h("span",null,"$"+y(("formatNumber"in e?e.formatNumber:p(S))(s.position_value||0,2)),1),h("div",null,[h("span",{class:"value",style:R({color:s.profit>=0?p(U)[0]:p(L)[0]})}," $"+y(("formatNumber"in e?e.formatNumber:p(S))(s.profit||0,2)),5)])],8,D)})),128))])):N("",!0),p(B)&&0!==(null==(n=p(B))?void 0:n.length)||p(P)?N("",!0):(c(),T(s,{key:1,class:"mt-200px"}))]})),_:1},8,["height"])),[[l,p(P)]]),m(Q,{ref_key:"profitLossRef1",ref:Z,modelValue:p(Y),"onUpdate:modelValue":r[1]||(r[1]=e=>I(Y)?Y.value=e:null)},null,8,["modelValue"])])}}}),[["__scopeId","data-v-bb7a359a"]]),X=e({__name:"index",props:{currentActiveTab:{type:String,default:"Transactions"}},setup(e){const a=e,t=r(),s=f(),l=n((()=>{var e;const r=_(t.params.id);return(null==r?void 0:r.chain)||(null==(e=s.token)?void 0:e.chain)||""}));return(e,r)=>p(M).includes(p(l))?(c(),T(B,{key:0,currentActiveTab:a.currentActiveTab},null,8,["currentActiveTab"])):(c(),T(G,{key:1,currentActiveTab:a.currentActiveTab},null,8,["currentActiveTab"]))}});export{X as default};
