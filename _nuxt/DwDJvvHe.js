import{v as e,V as t,r as s,g as l,qc as a,n as i,aj as o,m as r,N as n,c,o as p,a as u,A as m,b as d,aT as x,O as v,K as f,d as w,t as h,i as b,ac as g,w as y,F as C,ad as _,ab as k,B as j,D as T,C as L,a8 as V,p as M,a4 as E,_ as N,W as A,G as F,a$ as H,y as q,U as I,aG as R,aL as D,s as P,aK as S,Q as U,qd as $}from"./LNDzZpPm.js";import{E as z}from"./CqaOUC0Y.js";import{u as B,f as W,g as O,a as Y}from"./DXD0LooT.js";import{u as G}from"./Cl1KJRwQ.js";import{u as K}from"./CctE0S-S.js";import"./C3-dVZ_q.js";import"./CyofXtRf.js";import"./BcS6nOuf.js";import"./DuC4p7MX.js";import"./CAu_L1SH.js";import"./4BOpdlp6.js";import"./CdYdV4TG.js";import"./vmSyQCMq.js";import"./DQUqQXp4.js";import"./RFi1iHSl.js";import"./CzFZvokD.js";import"./BrHgemS_.js";import"./D-K915qb.js";import"./DsasURJA.js";import"./saZFXB17.js";import"./CxxVZToV.js";import"./FpEH-fmd.js";import"./CLvFcI0Y.js";import"./DSef3GLz.js";import"./XXbWVT46.js";import"./CSZL48hR.js";import"./ChbAheob.js";import"./CaxwGV-A.js";import"./9dry2T_v.js";import"./fQpEmYRS.js";import"./FG6gRdvh.js";import"./Dl5uLHiY.js";/* empty css        */import"./D6i2W5JX.js";import"./ptpwaLtc.js";import"./By0H2_f6.js";import"./DRPZaXSw.js";const Z={class:"pb-16px"},Q={class:"flex flex-col gap-8px flex-1 min-w-0"},J={class:"justify-between items-center flex"},X={class:"min-w-0 flex-1"},ee={class:"min-w-0 flex-1 flex items-center gap-7px"},te={class:"flex-1 min-w-0"},se={class:"gap-8px flex items-center min-w-0"},le={key:0,width:12,src:"data:image/svg+xml,%3csvg%20width='12'%20height='12'%20viewBox='0%200%2012%2012'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_5673_16705)'%3e%3cpath%20d='M11.6338%205.11317L10.7455%204.22488C10.7027%204.18326%2010.6686%204.13351%2010.6452%204.07855C10.6219%204.02358%2010.6097%203.9645%2010.6095%203.90478V2.64037C10.6091%202.3094%2010.4774%201.9921%2010.2434%201.75806C10.0094%201.52403%209.69205%201.39237%209.36108%201.39197H8.09667C8.03695%201.39171%207.97788%201.37955%207.92292%201.35619C7.86796%201.33283%207.8182%201.29874%207.77657%201.25593L6.88829%200.367642C6.65211%200.13317%206.3328%200.00158691%206%200.00158691C5.6672%200.00158691%205.34789%200.13317%205.11171%200.367642L4.22343%201.25593C4.18179%201.29874%204.13204%201.33283%204.07708%201.35619C4.02211%201.37955%203.96305%201.39171%203.90332%201.39197H2.63892C2.30794%201.39237%201.99064%201.52403%201.75661%201.75806C1.52257%201.9921%201.39092%202.3094%201.39052%202.64037V3.90478C1.39028%203.9645%201.37813%204.02358%201.35476%204.07855C1.3314%204.13351%201.29731%204.18326%201.25447%204.22488L0.366186%205.11317C0.131636%205.34931%200%205.66863%200%206.00146C0%206.33428%200.131636%206.6536%200.366186%206.88974L1.25447%207.77803C1.29731%207.81965%201.3314%207.8694%201.35476%207.92436C1.37813%207.97933%201.39028%208.03841%201.39052%208.09813V9.36254C1.39092%209.69351%201.52257%2010.0108%201.75661%2010.2448C1.99064%2010.4789%202.30794%2010.6105%202.63892%2010.6109H3.90332C3.96305%2010.6112%204.02211%2010.6234%204.07708%2010.6467C4.13204%2010.6701%204.18179%2010.7042%204.22343%2010.747L5.11171%2011.6353C5.22833%2011.752%205.36681%2011.8446%205.51923%2011.9077C5.67164%2011.9709%205.83501%2012.0034%206%2012.0034C6.16499%2012.0034%206.32836%2011.9709%206.48077%2011.9077C6.63319%2011.8446%206.77167%2011.752%206.88829%2011.6353L7.77657%2010.747C7.8182%2010.7042%207.86796%2010.6701%207.92292%2010.6467C7.97788%2010.6234%208.03695%2010.6112%208.09667%2010.6109H9.36108C9.69205%2010.6105%2010.0094%2010.4789%2010.2434%2010.2448C10.4774%2010.0108%2010.6091%209.69351%2010.6095%209.36254V8.09813C10.6097%208.03841%2010.6219%207.97933%2010.6452%207.92436C10.6686%207.8694%2010.7027%207.81965%2010.7455%207.77803L11.6338%206.88974C11.8684%206.6536%2012%206.33428%2012%206.00146C12%205.66863%2011.8684%205.34931%2011.6338%205.11317ZM7.88061%205.2172L5.75192%207.35389C5.67489%207.42599%205.57333%207.4661%205.46783%207.4661C5.36232%207.4661%205.26077%207.42599%205.18374%207.35389L4.11939%206.28155C4.04635%206.20701%204.00566%206.10665%204.00619%206.00228C4.00672%205.89792%204.04841%205.79798%204.12221%205.72418C4.19601%205.65038%204.29595%205.60869%204.40031%205.60816C4.50468%205.60764%204.60503%205.64832%204.67957%205.72137L5.46383%206.50562L7.32042%204.64902C7.39533%204.57591%207.49585%204.53499%207.60051%204.53499C7.70518%204.53499%207.8057%204.57591%207.88061%204.64902C7.91861%204.68593%207.94882%204.7301%207.96945%204.77889C7.99008%204.82769%208.00071%204.88013%208.00071%204.93311C8.00071%204.98609%207.99008%205.03853%207.96945%205.08733C7.94882%205.13613%207.91861%205.18029%207.88061%205.2172Z'%20fill='%231C9BEF'/%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='clip0_5673_16705'%3e%3crect%20width='12'%20height='12'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e",alt:""},ae={class:"color-[--up-color] text-12px"},ie={key:2,class:"color-[--up-color] text-12px"},oe={class:"text-12px color-[--secondary-text]"},re={key:0,class:"gap-8px flex items-center"},ne=["innerHTML"],ce=["innerHTML"],pe=["src"],ue=["src","onLoad"],me={key:0,class:"absolute top-0 left-0 w-full h-full bg-black/50 rounded-8px"},de={__name:"listItem",props:{item:{type:Object,required:!0},index:{type:Number,required:!0}},setup(N){const A=G(),{t:F}=e(),H=t(),q=N,I=s({}),R=s(null),D=s(null),P=s(!1),S=s(!1),U=l((()=>{var e;return a((null==(e=q.item)?void 0:e.content)||"")})),$=()=>{M((()=>{const e=D.value||R.value;if(!e)return;const t=11*(parseFloat(getComputedStyle(e).lineHeight)||22);S.value=e.scrollHeight>t+1}))};i((()=>{$(),window.addEventListener("resize",$)})),o((()=>{window.removeEventListener("resize",$)})),r((()=>{var e;return null==(e=q.item)?void 0:e.content}),(()=>{$()}),{immediate:!0});const z=e=>{window.open(e)},O=e=>{const t=I.value[e];t&&M((()=>{if(t.updatePopper)t.updatePopper();else if(t.popperInstance)t.popperInstance.update();else if(t.$&&t.$.exposed){const e=t.$.exposed;e.updatePopper&&e.updatePopper()}requestAnimationFrame((()=>{window.dispatchEvent(new Event("resize"))}))}))},Y=e=>{var t;"A"!==e.target.tagName&&(t=q.item.url,window.open(t))};return(e,t)=>{var s,l;const a=x,i=_,o=j,r=V,q=n("tooltip");return p(),c("div",Z,[u("div",Q,[u("div",J,[u("div",X,[u("div",ee,[d(a,{"icon-size":"32px",class:"cursor-pointer",wallet_logo:{logo:N.item.author.profile_pic,name:N.item.author.name},onClick:t[0]||(t[0]=e=>z(N.item.author.twitter_url))},null,8,["wallet_logo"]),u("div",te,[u("div",se,[v((p(),c("span",{class:"color-[--main-text] text-16px lh-20px min-w-0 max-w-[calc(100%-80px)] truncate cursor-pointer",onClick:t[1]||(t[1]=e=>z(N.item.author.twitter_url))},[w(h(N.item.author.name),1)])),[[q,N.item.author.name]]),N.item.verified?(p(),c("img",le)):m("",!0),N.item.created_at&&Number(("formatTimeFromNow"in e?e.formatTimeFromNow:b(g))(N.item.created_at,!0))<60?(p(),f(i,{key:`${N.item.created_at}`,timestamp:+N.item.created_at,"end-time":60},{default:y((({seconds:t})=>[u("span",ae,[t<60?(p(),c(C,{key:0},[w(h(t)+"s ",1)],64)):(p(),c(C,{key:1},[w(h(("formatTimeFromNow"in e?e.formatTimeFromNow:b(g))(N.item.created_at)),1)],64))])])),_:1},8,["timestamp"])):v((p(),c("span",ie,[w(h(("formatTimeFromNow"in e?e.formatTimeFromNow:b(g))(N.item.created_at)),1)])),[[q,("formatDate"in e?e.formatDate:b(k))(N.item.created_at,"YYYY-MM-DD HH:mm:ss")]])]),u("div",oe,"@"+h(N.item.author.username),1)])])]),-1!==N.index?(p(),c("div",re,[u("div",{class:"w-24px h-24px bg-[--main-list-hover] rounded-4px flex items-center justify-center cursor-pointer",onClick:t[2]||(t[2]=e=>1===N.item.author.follow_status?(async(e,t)=>{try{await B(e),E.success(F("cancelFollowed")),A.list[t].author.follow_status=0}catch(s){E.error(F("failed"))}})(N.item.author.author_id,N.index):(async(e,t)=>{try{if(!H.accessToken)return void H.changeConnectVisible(!0);await W(e),E.success(F("followed")),A.list[t].author.follow_status=1}catch(s){E.error(F("failed"))}})(N.item.author.author_id,N.index))},[d(o,{name:1===N.item.author.follow_status?"custom:twitter-collect":"custom:twitter-uncollect",class:"text-12px"},null,8,["name"])]),d(o,{name:`custom:twitter-${N.item.type}`,class:"text-24px"},null,8,["name"])])):m("",!0)]),u("div",{class:T(["relative",-1!==N.index?"pl-40px":""])},[u("div",{ref_key:"contentEl",ref:R,class:T(["text-14px lh-22px break-words",{"line-11":!b(P)&&b(S)}])},[u("div",{class:"cursor-pointer",onClick:Y,innerHTML:b(U)},null,8,ne)],2),u("div",{ref_key:"measureEl",ref:D,class:"text-14px lh-22px break-words absolute opacity-0 pointer-events-none",style:{width:"100%",top:"0",left:"0","z-index":"-1"},innerHTML:b(U)},null,8,ce)],2),(p(!0),c(C,null,L(null==(l=null==(s=N.item.medias)?void 0:s.slice)?void 0:l.call(s,0,1),((e,s)=>(p(),c("div",{key:s,class:T([-1!==N.index?"pl-40px":"","relative"])},[d(r,{ref_for:!0,ref:e=>{e&&(b(I)[`${s}`]=e)},"popper-class":"tooltip-pd-0","show-arrow":!1,placement:"right","popper-options":{modifiers:[{name:"eventListeners",options:{scroll:!0,resize:!0}}]},onShow:e=>(e=>{M((()=>{O(e)}))})(s)},{default:y((()=>[u("img",{src:e.media_url_https,alt:"",class:"w-full max-h-300px rounded-8px object-cover"},null,8,pe)])),content:y((()=>[u("img",{src:e.media_url_https,alt:"",class:"max-w-50vw max-h-50vh object-cover rounded-8px",onLoad:e=>(e=>{M((()=>{O(e)}))})(s)},null,40,ue)])),_:2},1032,["onShow"]),"video"===e.type?(p(),c("div",me,[d(o,{name:"custom:play-circle-line",class:"absolute top-50% left-50% transform -translate-x-1/2 -translate-y-1/2 text-48px text-white cursor-pointer",onClick:t[3]||(t[3]=e=>{return t=N.item.url,void window.open(t);var t})})])):m("",!0)],2)))),128)),b(S)?(p(),c("div",{key:0,class:T([-1!==N.index?"pl-40px":"","justify-between items-center flex"])},[t[5]||(t[5]=u("div",{class:"flex items-center gap-4px cursor-pointer text-12px color-[--secondary-text]"},null,-1)),u("span",{class:"flex items-center gap-4px cursor-pointer color-[--primary-color] text-12px",onClick:t[4]||(t[4]=e=>P.value=!b(P))},[d(o,{name:"custom:angle-down",class:T(b(P)?"rotate-180":"")},null,8,["class"]),w(" "+h(b(P)?b(F)("Collapse"):b(F)("Expand")),1)])],2)):m("",!0)])])}}},xe={class:"color-[--third-text] text-12px mb-20px mt-4px"},ve={key:1,class:"flex flex-col items-center pt-60px"},fe={class:"color-[--third-text] text-12px mb-20px mt-4px"},we={key:2},he={class:"color-[--third-text] text-12px mb-20px mt-4px"},be={class:"flex flex-col gap-16px"},ge={key:0,class:"border-1px border-solid border-[--dialog-divider] rounded-8px px-12px pt-16px ml-40px mb-16px"},ye=N({__name:"list",props:{isMine:{type:Boolean}},emits:["startAttention","endReached"],setup(s,{emit:a}){const{t:i}=e(),o=a,r=s,n=t();A();const x=G(),v=l((()=>0===x.list.length)),g=e=>{"bottom"===e&&o("endReached")};return(e,t)=>{const s=F,l=H,a=j,_=z;return r.isMine&&!b(n).evmAddress?(p(),f(l,{key:0},{default:y((()=>[u("span",xe,h(b(i)("noWalletTip")),1),d(s,{type:"primary",class:"text-12px w-266px h-40px",onClick:t[0]||(t[0]=e=>b(n).changeConnectVisible(!0))},{default:y((()=>[w(h(b(i)("connectBotWallet")),1)])),_:1})])),_:1})):r.isMine&&b(v)?(p(),c("div",ve,[d(a,{name:"custom:twitter-empty",class:"text-61px mb-12px color-[--icon-color]"}),u("span",fe,h(b(i)("twitterEmpty")),1),d(s,{type:"primary",class:"text-12px w-266px h-40px",onClick:t[1]||(t[1]=e=>o("startAttention"))},{default:y((()=>[w(h(b(i)("attention")),1)])),_:1})])):!r.isMine&&b(v)?(p(),c("div",we,[d(l,{class:"pt-40px"},{default:y((()=>[u("span",he,h(b(i)("emptyNoData")),1)])),_:1})])):(p(),f(_,{key:3,height:"calc(100% - 120px)",onEndReached:g},{default:y((()=>[u("div",be,[(p(!0),c(C,null,L(b(x).list,((e,t)=>(p(),c("div",{key:e.id,class:"border-b-1px border-b-solid border-b-[--border]"},[d(de,{item:e,index:t},null,8,["item","index"]),["2","3","4"].includes(e.type)&&(e.retweeted_tweet||e.quoted_tweet||e.replied_tweet)?(p(),c("div",ge,[d(de,{item:e.retweeted_tweet||e.quoted_tweet||e.replied_tweet,index:-1},null,8,["item"])])):m("",!0)])))),128))])])),_:1}))}}},[["__scopeId","data-v-4a1faf2e"]]),Ce={class:"flex items-center pb-14px border-b-1px border-b-solid border-b-[--border] mb-12px"},_e={class:"flex justify-between items-center"},ke={class:"flex items-center gap-12px"},je={class:"flex justify-between mb-12px items-center"},Te={class:"flex gap-16px"},Le=["onClick"],Ve={class:"flex justify-between items-center mb-14px"},Me={class:"flex items-center gap-8px color-[--secondary-text]"},Ee={class:"pt-16px flex items-center"},Ne=["src","volume"],Ae={__name:"trackerPop",props:{scrollHeight:{type:Number,default:0}},emits:["setDrawerVisible"],setup(a,{emit:i}){const o=i,{t:n}=e(),x=G(),v=K(),g=q(),_=t(),k=s(1),V=s(!1),M=I("twitterAudio"),E=s({...x.query}),N=1,A=2,H=l((()=>[{label:n("hot2"),value:N},{label:n("mine"),value:A}])),z=l((()=>[{label:n("tweet"),value:1},{label:n("retweet"),value:3},{label:n("quote"),value:2},{label:n("reply"),value:4}])),B=l((()=>k.value===A)),W=s(E.value.types.length===z.value.length),Z=s(!1),Q=()=>{E.value.types=W.value?z.value.map((e=>e.value)):[],Z.value=E.value.types.length>0&&E.value.types.length<z.value.length},J=e=>{const t=e.length;W.value=t===z.value.length,Z.value=t>0&&t<z.value.length},X=()=>{E.value.page_token="",x.finished=!1,x.list=[]};r((()=>_.accessToken),(e=>{e&&B.value&&(X(),te())}));const ee=()=>{V.value=!1,X(),x.query={...x.query,...E.value},te()},te=async()=>{const e=k.value;if(!B.value||_.accessToken){x.loading=!0;try{const t=await O({...E.value,follow_only:B.value,types:E.value.types.join(",")});if(t&&k.value===e){E.value.page_token=t.page_token||"";const e=t.list||[];x.finished=!t.page_token,E.value.page_token||x.finished?x.list=[...x.list,...e]:x.list=e}}catch(t){}finally{x.loading=!1}}};te();const se=l((()=>{var e;return null==(e=_.userInfo)?void 0:e.tgUid}));function le(e){v.send({jsonrpc:"2.0",method:e,params:["public_twitter","hot"],id:1})}function ae(e){v.send({jsonrpc:"2.0",method:e,params:["twitter_monitor",...se.value?[se.value]:[]],id:1})}le("subscribe"),r((()=>k.value),(e=>{e===A?(le("unsubscribe"),ae("subscribe")):(ae("unsubscribe"),le("subscribe"))}));const ie=async e=>{if(e.TweetId&&E.value.types.includes(+e.Type)){const t=await Y(e.TweetId);x.list.unshift(t),x.list.length>100&&(x.list=x.list.slice(0,100)),M.value&&g.audioSettings.audio.twitter&&M.value.play()}};return r((()=>v.wsResult[R.PUBLIC_TWITTER]),ie),r((()=>v.wsResult[R.TWITTER_MONITOR]),ie),(e,t)=>{const s=j,l=D,a=S,i=F,r=U;return p(),c("div",{class:T(["w-full h-full bg-[--secondary-bg] p-12px",{"pr-16px":b(x).isLeftFixed,"pl-16px":b(x).isRightFixed}])},[d(s,{name:"custom:drag2",class:"absolute top-4px left-50% ml--6px text-6px bg-[--dialog-list-hover] drag-handle"}),u("div",Ce,[u("div",_e,h(b(n)("twitterTracker")),1),t[8]||(t[8]=u("div",{class:"flex-1 drag-handle h-20px"},null,-1)),u("div",ke,[b(_).evmAddress?(p(),f(s,{key:0,name:"custom:pump-setting",class:"color-[--secondary-text] hover:color-[--main-text] cursor-pointer text-14px",onClick:t[0]||(t[0]=e=>o("setDrawerVisible",!0))})):m("",!0),d(s,{name:"custom:close",class:"text-14px shrink-0 cursor-pointer color-[--main-text]",onClick:t[1]||(t[1]=e=>b(x).visible=!1)})])]),u("div",je,[u("div",Te,[(p(!0),c(C,null,L(b(H),(e=>(p(),c("span",{key:e.value,class:T(["text-14px cursor-pointer",b(k)===e.value?"color-[--main-text]":"color-[--secondary-text]"]),onClick:t=>{return s=e.value,k.value=s,X(),void te();var s}},h(e.label),11,Le)))),128))])]),u("div",Ve,[u("div",Me,[d(r,{visible:b(V),"onUpdate:visible":t[5]||(t[5]=e=>P(V)?V.value=e:null),placement:"bottom-end",trigger:"click",width:164},{reference:y((()=>[d(s,{name:"custom:filter",class:"text-12px cursor-pointer"})])),default:y((()=>[d(l,{modelValue:b(W),"onUpdate:modelValue":t[2]||(t[2]=e=>P(W)?W.value=e:null),indeterminate:b(Z),class:"[--el-checkbox-height:16px] mb-12px",onChange:Q},{default:y((()=>[w(h(b(n)("all")),1)])),_:1},8,["modelValue","indeterminate"]),d(a,{modelValue:b(E).types,"onUpdate:modelValue":t[3]||(t[3]=e=>b(E).types=e),class:"flex flex-col [--el-checkbox-height:16px] gap-12px",onChange:J},{default:y((()=>[(p(!0),c(C,null,L(b(z),(e=>(p(),f(l,{key:e.value,value:e.value},{default:y((()=>[w(h(e.label),1)])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue"]),u("div",Ee,[d(i,{class:"min-w-0",onClick:t[4]||(t[4]=e=>V.value=!1)},{default:y((()=>[w(h(b(n)("cancel")),1)])),_:1}),d(i,{class:"min-w-0",type:"primary",onClick:ee},{default:y((()=>[w(h(b(n)("confirm")),1)])),_:1})])])),_:1},8,["visible"]),d(s,{name:b(g).audioSettings.audio.twitter?"custom:ad":"custom:admute",class:"mr-4px cursor-pointer",onClick:t[6]||(t[6]=e=>b(g).audioSettings.active="audio")},null,8,["name"])])]),d(ye,{isMine:b(B),onEndReached:te,onStartAttention:t[7]||(t[7]=e=>o("setDrawerVisible",!0))},null,8,["isMine"]),u("audio",{ref_key:"twitterAudio",ref:M,controls:"",style:{display:"none"},src:("getAudioUrl"in e?e.getAudioUrl:b($))(b(g).audioSettings.audio.twitter),volume:+b(g).audioSettings.audio.volume/100||.5},null,8,Ne)],2)}}};export{Ae as default};
